1.In Section 4 we have anticipated that the smart grid communication infrastructure is commonly envisioned as a hierarchical network with a three-tier architecture, consisting of: (1) an access tier, (2) a distribution tier, and (3) a core tier. The purpose of this section is to further elaborate on this view and to present a detailed reference model for such communication infrastructure. This reference architecture describes the communication capabilities that should be provided to electric devices at different tiers. Furthermore, it explains how devices should be organized into network topologies.In addition, we discuss how small-scale networks could be interconnected to build a large-scale communication system providing end-to-end connectivity over a regional or national area. Finally, this reference network architecture allows us to easily map the communication technologies described in Section  onto the different components of the communication infrastructure (this mapping is also reported in Table 2 and Table 3). To guide the following discussion in we illustrate our reference architectural model by giving an example of a possible smart grid communication network. This example has been obtained by considering the smart grid illustrated in and substituting the energy flows with information flows. The communication networks deployed in the access tier of the smart grid communication infrastructure are responsible for: (i) enabling real-time information flows between end customers and energy management systems, and (ii) allowing a more active role of end customers in the electricity market and the power grid management. Therefore, home area networks (HANs) are very important for the access tier because they can provide low-cost solutions to support monitoring and control of electric devices that are deployed at customers’ premises. Both low-range wired and wireless technologies can be used to build such networks. However, WiFi is generally considered too expensive for most HAN devices and it consumes too much power, while ZigBee is the de facto standard used by many manufactures to provide low-power wireless communication capabilities to a variety of tiny devices (sensors). Nevertheless, HAN gateways should be equipped with multiple radio interfaces to facilitate the integration of different classes of devices.It is also important to point out that similar concepts can be applied to networks with larger scales such as Building Area Networks (BANs) and Industrial Area Networks (IANs), which will be used in the access tier to monitor and control the electricity consumption in buildings and industrial facilities. The access tier must also provide connectivity services suitable for electric vehicles, which will have the twofold roles of mobile consumers and mobile storage of electricity.In this case wireless communication technologies are the most natural choice for supporting V2G scenarios. However, different use cases can be envisaged that require different networking solutions. For instance, electric vehicles need to interact with HANs when parked at homes or offices, and WiFibased LAN solutions appear the best option. On the other hand, electric vehicles can stay connected to the smart grid communication system when on the move by using public 3G/4G cellular networks or a WiFi-enabled roadside communication infrastructure. More generally, vertical handover techniques can be used by moving vehicles to switch from one wireless network to another while maintaining seamless connectivity. A survey of the main vertical and horizontal handover approaches in the literature can be found in. The communication networks deployed in the distribution tier of the smart grid communication infrastructure are responsible for: (i) enabling the state estimation and real-time control of the distribution grid, (ii) supporting the interconnection of local area networks (HANs, BANs and IANs) with the smart grid communication backbone, and (iii) providing the communication support for implementing the data management services that are needed to efficiently handle the large amount of data collected in the distribution grid. As observed in Section , AMI networks will be a key component of the distribution tier because they interconnect smart meters with data aggregators and control systems deployed in the distribution grid.It is important to point out that there is not a single communication technology that can meet the requirements of all AMI deployment scenarios, and utility companies are considering both wired and wireless communication technologies for building their AMI systems. Options include conventional PLC technologies, point-to-point communications using cellular or medium-range wireless (WiMax or WiFi) technologies; multi-hop wireless technologies, such as mesh networking solutions, which can provide a flexible and easy to deploy extension of the existing wired networks. Given the heterogeneity of communication technologies, specific technologies are needed to support internetworking and to provide seamless service provisioning. The IP Multimedia Subsystem (IMS) is a promising solution to address this issue, since it offers the needed interworking environment and service flexibility for the integration of wireless access technologies. The 801 standard is also supporting various mechanisms that can be used to enable the seamless interoperation between heterogeneous technologies.In addition to AMI networks the distribution tier will include specialized networks to provide reliable communications to a large number of heterogeneous sensors and actuators that will be deployed in smart grids to monitor and control power system equipment (circuit breakers, feeders and substation transformers, DER units). These networks are commonly named Field Area Networks (FANs), or Neighborhood Area Networks (NANs).In some cases the communication technologies used in FANs will not be dissimilar from the ones that are considered for AMI networks. However, FANs can also be considered an evolution of existing SCADA-based networks that are used for power grid protection, and they will have more stringent real-time requirements than AMI networks. Furthermore, elements in a FAN can be physically distant from each other. Thus, 4G technologies (LTE) will have a key role in most FAN deployments, while they are less important in AMI networks. The core tier of the smart grid communication system consists of a Wide Area Network (WAN). Such high-capacity communication backbone is used to deliver the large amounts of data collected by the highly dispersed AMI systems and FANs to remote control centers over long distances. Various options have been considered for the deployment of a WAN meeting the requirements of smart grid communications, such as all-IP core networks or MPLSbased networks. However, the fundamental choice that electric utilities are facing is between the deployment of private WANs and the use of public data networks. Several factors are influencing the decision of grid operators and the need of high reliability, security and low latency are the most important ones, along with economical affordability. As a matter of fact, a growing number of utilities are choosing to deploy a private hybrid fiber/wireless network as the backbone for their electric grid. So far we have presented a general reference model of the network topology for the smart grid communication system. To conclude this section we further elaborate on some specific areas that are worth exploring: (i) the applicability of Internet concepts and models to smart grid communications, (ii) AMI deployments, and (iii) the applicability of multi-hop wireless technologies for smart grid communications.

1-1.In Section 4 we have anticipated that the smart grid communication infrastructure is commonly envisioned as a hierarchical network with a three-tier architecture, consisting of: (1) an access tier, (2) a distribution tier, and (3) a core tier. #relationship:0# 1-2.The purpose of this section is to further elaborate on this view and to present a detailed reference model for such communication infrastructure. #relationship:0# 1-3.This reference architecture describes the communication capabilities that should be provided to electric devices at different tiers. #relationship:D# 1-4.Furthermore, it explains how devices should be organized into network topologies. #relationship:D# 1-5.In addition, we discuss how small-scale networks could be interconnected to build a large-scale communication system providing end-to-end connectivity over a regional or national area. #relationship:0# 1-6.Finally, this reference network architecture allows us to easily map the communication technologies described in Section  onto the different components of the communication infrastructure (this mapping is also reported in Table 2 and Table 3). 
1-7.To guide the following discussion in we illustrate our reference architectural model by giving an example of a possible smart grid communication network. #relationship:C# 1-8.This example has been obtained by considering the smart grid illustrated in and substituting the energy flows with information flows. 
1-9.The communication networks deployed in the access tier of the smart grid communication infrastructure are responsible for: (i) enabling real-time information flows between end customers and energy management systems, and (ii) allowing a more active role of end customers in the electricity market and the power grid management. #relationship:A# 1-10.Therefore, home area networks (HANs) are very important for the access tier because they can provide low-cost solutions to support monitoring and control of electric devices that are deployed at customers’ premises. 
1-11.Both low-range wired and wireless technologies can be used to build such networks. #relationship:B# 1-12.However, WiFi is generally considered too expensive for most HAN devices and it consumes too much power, while ZigBee is the de facto standard used by many manufactures to provide low-power wireless communication capabilities to a variety of tiny devices (sensors). #relationship:B# 1-13.Nevertheless, HAN gateways should be equipped with multiple radio interfaces to facilitate the integration of different classes of devices. 
1-14.It is also important to point out that similar concepts can be applied to networks with larger scales such as Building Area Networks (BANs) and Industrial Area Networks (IANs), which will be used in the access tier to monitor and control the electricity consumption in buildings and industrial facilities. 
1-15.The access tier must also provide connectivity services suitable for electric vehicles, which will have the twofold roles of mobile consumers and mobile storage of electricity. #relationship:C# 1-16.In this case wireless communication technologies are the most natural choice for supporting V2G scenarios. #relationship:B# 1-17.However, different use cases can be envisaged that require different networking solutions. 
1-18.For instance, electric vehicles need to interact with HANs when parked at homes or offices, and WiFibased LAN solutions appear the best option. #relationship:D# 1-19.On the other hand, electric vehicles can stay connected to the smart grid communication system when on the move by using public 3G/4G cellular networks or a WiFi-enabled roadside communication infrastructure. #relationship:C# 1-20.More generally, vertical handover techniques can be used by moving vehicles to switch from one wireless network to another while maintaining seamless connectivity. 
1-21.A survey of the main vertical and horizontal handover approaches in the literature can be found in. 
1-22.The communication networks deployed in the distribution tier of the smart grid communication infrastructure are responsible for: (i) enabling the state estimation and real-time control of the distribution grid, (ii) supporting the interconnection of local area networks (HANs, BANs and IANs) with the smart grid communication backbone, and (iii) providing the communication support for implementing the data management services that are needed to efficiently handle the large amount of data collected in the distribution grid. 
1-23.As observed in Section , AMI networks will be a key component of the distribution tier because they interconnect smart meters with data aggregators and control systems deployed in the distribution grid.
1-24.It is important to point out that there is not a single communication technology that can meet the requirements of all AMI deployment scenarios, and utility companies are considering both wired and wireless communication technologies for building their AMI systems. 
1-25.Options include conventional PLC technologies, point-to-point communications using cellular or medium-range wireless (WiMax or WiFi) technologies; multi-hop wireless technologies, such as mesh networking solutions, which can provide a flexible and easy to deploy extension of the existing wired networks. 
1-26.Given the heterogeneity of communication technologies, specific technologies are needed to support internetworking and to provide seamless service provisioning. 
1-27.The IP Multimedia Subsystem (IMS) is a promising solution to address this issue, since it offers the needed interworking environment and service flexibility for the integration of wireless access technologies. 
1-28.The 801 standard is also supporting various mechanisms that can be used to enable the seamless interoperation between heterogeneous technologies. #relationship:D# 1-29.In addition to AMI networks the distribution tier will include specialized networks to provide reliable communications to a large number of heterogeneous sensors and actuators that will be deployed in smart grids to monitor and control power system equipment (circuit breakers, feeders and substation transformers, DER units). #relationship:D# 1-30.These networks are commonly named Field Area Networks (FANs), or Neighborhood Area Networks (NANs).
1-31.In some cases the communication technologies used in FANs will not be dissimilar from the ones that are considered for AMI networks. #relationship:B# 1-32.However, FANs can also be considered an evolution of existing SCADA-based networks that are used for power grid protection, and they will have more stringent real-time requirements than AMI networks. #relationship:D# 1-33.Furthermore, elements in a FAN can be physically distant from each other. #relationship:A# 1-34.Thus, 4G technologies (LTE) will have a key role in most FAN deployments, while they are less important in AMI networks. 
1-35.The core tier of the smart grid communication system consists of a Wide Area Network (WAN). #relationship:C# 1-36.Such high-capacity communication backbone is used to deliver the large amounts of data collected by the highly dispersed AMI systems and FANs to remote control centers over long distances. 
1-37.Various options have been considered for the deployment of a WAN meeting the requirements of smart grid communications, such as all-IP core networks or MPLSbased networks. #relationship:B# 1-38.However, the fundamental choice that electric utilities are facing is between the deployment of private WANs and the use of public data networks. 
1-39.Several factors are influencing the decision of grid operators and the need of high reliability, security and low latency are the most important ones, along with economical affordability. 
1-40.As a matter of fact, a growing number of utilities are choosing to deploy a private hybrid fiber/wireless network as the backbone for their electric grid. 
1-41.So far we have presented a general reference model of the network topology for the smart grid communication system. #relationship:C# 1-42.To conclude this section we further elaborate on some specific areas that are worth exploring: (i) the applicability of Internet concepts and models to smart grid communications, (ii) AMI deployments, and (iii) the applicability of multi-hop wireless technologies for smart grid communications.

2.In this section we discuss the fundamental similarities that may exist between the architectural model of the Internet and the reference model of the smart grid communication network that we have described above. To recognize those similarities is important because they motivate the adoption of Internet design principles when designing scalable, reliable and secure networking solutions for the smart grid. For instance, both the Internet and the power grid have emerged from the incremental interconnection of an enormous number of (computing, sensing and electric) devices. Both the Internet and the power grid are highly heterogeneous and wide-area complex systems, which must support various degrees of autonomous control at different time scales. Finally, both the Internet and the power grid are witnessing a transition from a structure with a clear distinction between the core network and the access network (with almost all the system intelligence residing in the core) to a more federated system where the intelligence of the network (its ability to distribute, store, or modify information and energy, respectively) can be migrated to the periphery. To cope with scalability, heterogeneity and decentralization requirements, the Internet architecture has relied on the interconnection of small-scale subnetworks, which were then organized into a hierarchy of networks covering larger geographic areas. As we have described earlier, such structure is also conceived as the most suitable for smart grids in which individual electric subsystems have the responsibility of controlling separate geographical regions (micro-grids). Then, such electric subsystems can be easily mapped into separated communication subsystems interconnected with each other so as to form a hierarchy of communication networks. Furthermore, the IP stack has proven its interoperability and extensibility as the basis of the global Internet over the last 30 years. Thus, Internet technologies may be seen as a promising solution for the interoperability problem in the smart grid communication infrastructure. On the downside, there are well-known Internet problems (like security) that may hinder a tighter integration between the smart grid communication infrastructure and the Internet.  Examples of communication networks for AMI systems The network architecture model we have outlined above provides a unified conceptual framework to support end-to-end communication services in smart grids. However, in the literature there are also several examples of specialized communication networks that have been designed for specific components of the smart grid communication infrastructure.In particular, the design of communication networks for AMI systems has attracted much research interest. A full-fledged network architecture for AMI systems is described in.In that architecture the smallest communication subsystem is the HAN, which corresponds to an individual apartment. Then, a number of HANs are aggregated into a BAN, while several BANs form a NAN. Distinguishing features of this network architecture are the use of: (i) low-power wireless communication technologies in the HANs, (ii) different types of gateways to control the communications of increasingly larger areas and to facilitate the interconnections of different subsystems, and (iii) cellular (3G) technologies to enable communications between multiple BAN gateways and a NAN gateway. Note that in it is also envisaged that the 3G network interconnecting the gateways is a dedicated network separated from public cellular systems to ensure improved safety and reliability. AMI networks similar to the one proposed in have been also described in.In particular, in data management services are deployed within the NAN gateways, which are called concentrators, to support aggregation and storing of the information flows coming from multiple BANs. Furthermore, a base station is deployed to serve an area containing multiple NANs, which receives the data sent by NAN concentrators over dedicated WiMAX channels, and forwards this information to the regional control center over a wired network (using the Internet core backbone).In general, the trend is to prefer licensed wireless technologies, such as WiMAX and GSM/GPRS, for the communications in the neighborhood area networks, because grid operators can establish their own private network infrastructure, which makes easier to guarantee the required communication reliability and QoS. On the other hand, unlicensed wireless technologies, such as ZigBee and WiFi, are the main standards that are being considered for communications within houses or buildings, although they have been also proposed as less expensive options for supporting communications in NANs. As observed in Section , some of those standards have been also recently extended to provide specific support for the interoperability of devices that will be used in smart grids, such as the ZigBee SEP.  Multi-hop wireless networking in smart grids In this section we discuss the potential role that the multi-hop communication paradigm can have in a smart grid. Specifically, we focus our attention on two of the most mature and consolidated examples of networking technologies using multi-hop wireless communications: wireless mesh networks and wireless sensor networks.Interested readers can find an up-to-date overview of research and development in the broader area of networks based on the multi-hop ad hoc networking paradigm in. Wireless mesh networks.A wireless mesh network (WMN) is a dynamically self-organized network in which nodes automatically establish and maintain network connectivity through multihop wireless paths. There is a general agreement that wireless mesh networking is a key enabling technology for most next-generation wireless networks. WMNs have the potential to bring many advantages also to the smart grid communication system and many studies have advocated the use of WMNs in smart grids. For instance, a multi-hop wireless communication system inherently provides multiple redundant paths between any pair of communicating nodes. This eliminates single point of failures and mitigates the occurrence of bottleneck links, increasing the communication reliability with respect to conventional infrastructure- based wireless networks. Furthermore, multiple paths can be used to achieve a more balanced distribution of traffic over the network or to minimize the energy used by the mesh backbone to route traffic. Note that the use of selforganizing networking technologies allows to provide selfhealing capabilities to the communication network, which is necessary to meet the reliability requirements of smart grid communications. At the same time, wireless multihop communications are a lowcost solution to increase the coverage of existing wired networks and to deal with the difficulties of deploying new cables in existing facilities. Finally, as observed in Section  most popular wireless technologies, including WiFi, ZigBee and WiMAX, are now including amendments to their standards to provide support for multi-hop communications. Thus, mesh networking capabilities are expected to be supported by most commodity products. Recently, millimeter-wave links that operate in the 71–86 GHz frequency band have also been proposed as a cost-effective high-speed alternative for fixed wireless mesh networks, with data rates up to 1 Gbps. Wireless sensor networks. A wireless sensor network (WSN) consists of autonomous sensor devices monitoring physical or environmental phenomena, which employ multi-hop wireless communication technologies to cooperatively transfer their readings to a common sink or gateway. Most advanced sensors can also perform simple actions (close a circuit).In this case the term wireless sensor and actuator network (WSAN) is generally preferred to denote a wireless network that is able to perform distributed sensing and acting tasks. As observed in Section ,WSNs are expected to play a key role in enabling the pervasive monitoring of electric grids. It is important to point out that WSN is not a novel concept. There are more than two decades of intensive research in this field and several surveys exist in the literature that outline existing approaches for routing and data collection in WSNs.In particular, energy awareness is a very important design consideration for protocols and algorithms in sensor networks, and the design of a WSN should consider the amount of energy each protocol can spend to perform its tasks.In addition to energy efficiency, there are many other technical challenges to address before successfully applying WSN technologies in the smart grid domain. Specifically, the harsh environmental conditions of typical power systems, such as medium-voltage substations or power control rooms, pose significant issues to the reliability and latency of wireless communications, which also impact on the design of communication protocols for WSNs. Most importantly, in many classical applications for wireless sensor networks the goal is to detect the occurrence of an event (when the ambient temperature is above a given threshold), and it is sufficient that a small subset of the sensors that have observed the same event are able to report it to the application. This characteristic enables the use of mechanisms such as duty-cycling and data fusion to reduce spatially- correlated contention between nodes in the same neighborhood, as well as to improve energy efficiency and network lifetime. On the contrary, in many smart grid applications the sensed data of each individual sensor might be needed. For instance, this is the case of smart metering applications, which must collect information from each smart meter. This means that existing data collection techniques for wireless sensor networks should be modified to meet this additional constraint. Furthermore, in wireless sensor and actor networks there is a need for suitable coordination mechanisms between sensing and control functions to ensure that correct actions can be taken within the strict time constraints of most power grid processes. We conclude this section by pointing out that most WSNs for smart grids will be deployed in conditions that can make very difficult to replace batteries. Furthermore, maintenance costs due to the replacement of a large number of batteries may be excessive. To cope with these difficulties, many studies advocate the use of energy harvesting techniques to allow sensor nodes to take power from the surrounding environment. Energy harvesting covers a wide range of different technologies. Solar energy is the most obvious power source and photovoltaic cells can be used to obtain power from it. However, this solution is not applicable indoors.In smart grid environments electromagnetic induction seems the most feasible technology, but there are other approaches that can work as well. For instance, using the difference in temperature with thermal energy harvesting can be effective in substations, where there is a significant temperature gradient. For sensors deployed in buildings, vibrational energy can also be used. The downside of energy harvesting technologies is that they are still unable to provide a sustained energy supply to support continuous operation. Therefore, new power management schemes, transmission techniques, data aggregation and link scheduling algorithms, and routing protocols are needed to exploit the sporadic availability of energy.

2-1.In this section we discuss the fundamental similarities that may exist between the architectural model of the Internet and the reference model of the smart grid communication network that we have described above. 
2-2.To recognize those similarities is important because they motivate the adoption of Internet design principles when designing scalable, reliable and secure networking solutions for the smart grid. #relationship:C# 2-3.For instance, both the Internet and the power grid have emerged from the incremental interconnection of an enormous number of (computing, sensing and electric) devices. #relationship:D# 2-4.Both the Internet and the power grid are highly heterogeneous and wide-area complex systems, which must support various degrees of autonomous control at different time scales. #relationship:D# 2-5.Finally, both the Internet and the power grid are witnessing a transition from a structure with a clear distinction between the core network and the access network (with almost all the system intelligence residing in the core) to a more federated system where the intelligence of the network (its ability to distribute, store, or modify information and energy, respectively) can be migrated to the periphery. 
2-6.To cope with scalability, heterogeneity and decentralization requirements, the Internet architecture has relied on the interconnection of small-scale subnetworks, which were then organized into a hierarchy of networks covering larger geographic areas. #relationship:C# 2-7.As we have described earlier, such structure is also conceived as the most suitable for smart grids in which individual electric subsystems have the responsibility of controlling separate geographical regions (micro-grids). #relationship:D# 2-8.Then, such electric subsystems can be easily mapped into separated communication subsystems interconnected with each other so as to form a hierarchy of communication networks. #relationship:D# 2-9.Furthermore, the IP stack has proven its interoperability and extensibility as the basis of the global Internet over the last 30 years. #relationship:D# 2-10.Thus, Internet technologies may be seen as a promising solution for the interoperability problem in the smart grid communication infrastructure. 
2-11.On the downside, there are well-known Internet problems (like security) that may hinder a tighter integration between the smart grid communication infrastructure and the Internet.  #relationship:C# 2-12.Examples of communication networks for AMI systems The network architecture model we have outlined above provides a unified conceptual framework to support end-to-end communication services in smart grids. #relationship:B# 2-13.However, in the literature there are also several examples of specialized communication networks that have been designed for specific components of the smart grid communication infrastructure. #relationship:C# 2-14.In particular, the design of communication networks for AMI systems has attracted much research interest. 
2-15.A full-fledged network architecture for AMI systems is described in. #relationship:0# 2-16.In that architecture the smallest communication subsystem is the HAN, which corresponds to an individual apartment. #relationship:D# 2-17.Then, a number of HANs are aggregated into a BAN, while several BANs form a NAN. 
2-18.Distinguishing features of this network architecture are the use of: (i) low-power wireless communication technologies in the HANs, (ii) different types of gateways to control the communications of increasingly larger areas and to facilitate the interconnections of different subsystems, and (iii) cellular (3G) technologies to enable communications between multiple BAN gateways and a NAN gateway. #relationship:D# 2-19.Note that in it is also envisaged that the 3G network interconnecting the gateways is a dedicated network separated from public cellular systems to ensure improved safety and reliability. 
2-20.AMI networks similar to the one proposed in have been also described in. #relationship:D# 2-21.In particular, in data management services are deployed within the NAN gateways, which are called concentrators, to support aggregation and storing of the information flows coming from multiple BANs. #relationship:D# 2-22.Furthermore, a base station is deployed to serve an area containing multiple NANs, which receives the data sent by NAN concentrators over dedicated WiMAX channels, and forwards this information to the regional control center over a wired network (using the Internet core backbone).
2-23.In general, the trend is to prefer licensed wireless technologies, such as WiMAX and GSM/GPRS, for the communications in the neighborhood area networks, because grid operators can establish their own private network infrastructure, which makes easier to guarantee the required communication reliability and QoS. #relationship:D# 2-24.On the other hand, unlicensed wireless technologies, such as ZigBee and WiFi, are the main standards that are being considered for communications within houses or buildings, although they have been also proposed as less expensive options for supporting communications in NANs. 
2-25.As observed in Section , some of those standards have been also recently extended to provide specific support for the interoperability of devices that will be used in smart grids, such as the ZigBee SEP.  
2-26.Multi-hop wireless networking in smart grids In this section we discuss the potential role that the multi-hop communication paradigm can have in a smart grid. #relationship:C# 2-27.Specifically, we focus our attention on two of the most mature and consolidated examples of networking technologies using multi-hop wireless communications: wireless mesh networks and wireless sensor networks.
2-28.Interested readers can find an up-to-date overview of research and development in the broader area of networks based on the multi-hop ad hoc networking paradigm in. 
2-29.A wireless mesh network (WMN) is a dynamically self-organized network in which nodes automatically establish and maintain network connectivity through multihop wireless paths. #relationship:D# 2-30.There is a general agreement that wireless mesh networking is a key enabling technology for most next-generation wireless networks. #relationship:0# 2-31.WMNs have the potential to bring many advantages also to the smart grid communication system and many studies have advocated the use of WMNs in smart grids. #relationship:C# 2-32.For instance, a multi-hop wireless communication system inherently provides multiple redundant paths between any pair of communicating nodes. #relationship:D# 2-33.This eliminates single point of failures and mitigates the occurrence of bottleneck links, increasing the communication reliability with respect to conventional infrastructure- based wireless networks. #relationship:D# 2-34.Furthermore, multiple paths can be used to achieve a more balanced distribution of traffic over the network or to minimize the energy used by the mesh backbone to route traffic. #relationship:D# 2-35.Note that the use of selforganizing networking technologies allows to provide selfhealing capabilities to the communication network, which is necessary to meet the reliability requirements of smart grid communications. #relationship:D# 2-35.At the same time, wireless multihop communications are a lowcost solution to increase the coverage of existing wired networks and to deal with the difficulties of deploying new cables in existing facilities. #relationship:D# 2-37.Finally, as observed in Section  most popular wireless technologies, including WiFi, ZigBee and WiMAX, are now including amendments to their standards to provide support for multi-hop communications. #relationship:D# 2-38.Thus, mesh networking capabilities are expected to be supported by most commodity products. 
2-39.Recently, millimeter-wave links that operate in the 71–86 GHz frequency band have also been proposed as a cost-effective high-speed alternative for fixed wireless mesh networks, with data rates up to 1 Gbps. 
2-40.Wireless sensor networks. #relationship:D# 2-41.A wireless sensor network (WSN) consists of autonomous sensor devices monitoring physical or environmental phenomena, which employ multi-hop wireless communication technologies to cooperatively transfer their readings to a common sink or gateway. #relationship:D# 2-42.Most advanced sensors can also perform simple actions (close a circuit). #relationship:D# 2-43.In this case the term wireless sensor and actuator network (WSAN) is generally preferred to denote a wireless network that is able to perform distributed sensing and acting tasks. 
2-44.As observed in Section ,WSNs are expected to play a key role in enabling the pervasive monitoring of electric grids. #relationship:C# 2-45.It is important to point out that WSN is not a novel concept. #relationship:D# 2-46.There are more than two decades of intensive research in this field and several surveys exist in the literature that outline existing approaches for routing and data collection in WSNs. #relationship:D# 2-47.In particular, energy awareness is a very important design consideration for protocols and algorithms in sensor networks, and the design of a WSN should consider the amount of energy each protocol can spend to perform its tasks. #relationship:D# 2-48.In addition to energy efficiency, there are many other technical challenges to address before successfully applying WSN technologies in the smart grid domain. #relationship:D# 2-49.Specifically, the harsh environmental conditions of typical power systems, such as medium-voltage substations or power control rooms, pose significant issues to the reliability and latency of wireless communications, which also impact on the design of communication protocols for WSNs. #relationship:D# 2-50.Most importantly, in many classical applications for wireless sensor networks the goal is to detect the occurrence of an event (when the ambient temperature is above a given threshold), and it is sufficient that a small subset of the sensors that have observed the same event are able to report it to the application. #relationship:0# 2-51.This characteristic enables the use of mechanisms such as duty-cycling and data fusion to reduce spatially- correlated contention between nodes in the same neighborhood, as well as to improve energy efficiency and network lifetime. #relationship:B# 2-52.On the contrary, in many smart grid applications the sensed data of each individual sensor might be needed. #relationship:C# 2-53.For instance, this is the case of smart metering applications, which must collect information from each smart meter. #relationship:0# 2-54.This means that existing data collection techniques for wireless sensor networks should be modified to meet this additional constraint. #relationship:D# 2-55.Furthermore, in wireless sensor and actor networks there is a need for suitable coordination mechanisms between sensing and control functions to ensure that correct actions can be taken within the strict time constraints of most power grid processes. 
2-56.We conclude this section by pointing out that most WSNs for smart grids will be deployed in conditions that can make very difficult to replace batteries. #relationship:D# 2-57.Furthermore, maintenance costs due to the replacement of a large number of batteries may be excessive. 
2-58.To cope with these difficulties, many studies advocate the use of energy harvesting techniques to allow sensor nodes to take power from the surrounding environment. 
2-59.Energy harvesting covers a wide range of different technologies. 
2-60.Solar energy is the most obvious power source and photovoltaic cells can be used to obtain power from it. #relationship:B# 2-61.However, this solution is not applicable indoors.
2-62.In smart grid environments electromagnetic induction seems the most feasible technology, but there are other approaches that can work as well. #relationship:C# 2-63.For instance, using the difference in temperature with thermal energy harvesting can be effective in substations, where there is a significant temperature gradient. 
2-64.For sensors deployed in buildings, vibrational energy can also be used. 
2-65.The downside of energy harvesting technologies is that they are still unable to provide a sustained energy supply to support continuous operation. #relationship:A# 2-66.Therefore, new power management schemes, transmission techniques, data aggregation and link scheduling algorithms, and routing protocols are needed to exploit the sporadic availability of energy.

3.To allow communications in a distributed network formed by devices from different vendors and using heterogeneous communication technologies, it is necessary to specify a suite of protocols to: (i) associate node identities to network devices (naming and addressing functions), (ii) establish network paths between nodes (routing function); (iii) define message formats and rules to exchange those messages (transport function); and (iv) support advanced networking services such as broadcast, multicast, QoS and security. A comprehensive overview of all the network protocols and services that have been proposed in the literature for smart grid communications might require a separate survey per se. Thus, we focus on three important areas that we believe still entail major research challenges: (1) routing protocols, (2) QoS support, and (3) transport protocols.  Routing protocols As observed above, routing protocols are responsible for establishing communication paths among nodes in a network. As discussed in Section , in a smart grid different classes of devices, communication technologies and network topologies will be used depending on applications and use cases. This implies that multiple routing protocols should be employed to enable smart grid communications in the different networks forming the smart grid communication infrastructure. It is important to point out that in the past electric utilities preferred to avoid using routing protocols to communicate with field devices due to potential ðaÞ real-time violations and security attacks. However, as motivated in Section  electrical grids are progressively migrating towards IPbased network architectures. Therefore, it is expected that routing protocols will be increasingly more important, especially in the access tier of the smart grid communication system.It is out of the scope of this survey to outline all the different routing protocols that have been proposed so far for the various network categories described in Section Interested readers can find a comprehensive survey of routing protocols for HAN and NANs in. On the contrary, in the following we focus our attention on routing and data forwarding schemes for networks using wireless multi-hop communications (WMNs and WSNs) because we believe this is the area in which most research challenges are yet to be addressed, especially as far as QoS support is concerned. For the sake of clarity, in we provide a classification of the research trends in the area of routing for smart grids, which we have analyzed in the following. In the literature there exists a large amount of work on routing for ad hoc networks, as testified by the considerable number of different protocols that have been proposed, and the standardization of few of them by the IETF MANET working group. Furthermore, a number of surveys can be found on this area, which provide comprehensive classifications and comparisons of existing routing approaches. Relevant to this survey are the studies that are dedicated to the development of a more solid understanding on the applicability of those routing approaches in the smart grid domain, and AMI systems in particular. One of the main findings of those studies is that geographic routing strategies, which use geographical coordinates of networks nodes to optimize the path selection (selecting as intermediate relay the node that is geographically the closest one to the final destination), seem the best schemes for smart grid communications because they minimize routing overheads and they work particularly well in static networks. For instance, the authors in consider an exemplifying PLC network used in low- and medium-voltage distribution grids, and show how different location- based routing strategies cope with variable link qualities and node failures. Another research area related to routing in smart grid networks include the adaptation of routing schemes designed for generalpurpose WMNs to the context of smart grid communications.In, the reliability of the AODV routing protocol is investigated in a distribution grid topology that spans many kilometers. A new multi-path routing protocol for multi-channel WMNs, called DMMR, is proposed in, which tends to choose paths that do not share network nodes to reduce the probability that multiple paths are broken at the same time when a single node fails.In this way, DMMR ensures stable end-to-end connections. Other works have explored the applicability of the Hybrid Wireless Mesh Protocol, or HWMP, specified in the IEEE 801s standard, for routing in WMNs that are used for the monitoring and management of electric grids. HWMP operates directly at the link layer and it uses MAC addresses for routing instead of IP addresses. Furthermore, it is an hybrid protocol that adopts a tree-based hierarchical routing scheme for data transfers from network nodes to mesh gateways, and an AODV-like routing scheme for data transfers between network nodes. A known issue of HWMP is route instability in case of link failures and the work in proposes new routing metrics to reduce route fluctuations. A multipath extension to the tree-based routing strategy used in HWMP is also described in.Alternative tree-based routing schemes are proposed in by employing data forwarding mechanisms inspired by distributed depth-first search algorithms. Furthermore, to reduce network control overheads those schemes use data packets to detect loops and to propagate the information on failed links.In this way, routing tables can be updated quickly and with little overhead. Another considerable amount of work has been conducted on the design of routing protocols for WSNs that are able to cope with the limitation of computing power and memory size of embedded devices.Indeed, many of the devices installed in the last mile of an AMI network, such as home appliances, IEDs, and smart meters will be based on tiny micro controllers. Most of the above-described routing protocols for WMNs are not applicable to those devices because they perform complex computations and store a large amount of routing information. For these reasons, popular wireless standards for sensor and control systems, such as ZigBee and WirelessHART, have implemented much simpler routing schemes. Specifically, ZigBee specification include three routing protocols: (1), a treebased routing scheme for data collection at the network sink, (2) a variant of the AODV algorithm that is used to establish on-demand multi-hop network paths, and (3) a source routing for communications between the sink node and the end devices.It is also important to point out that in the last few years there has been a growing interest from the research community in designing optimized networking protocols for WSNs, which could potentially match the requirements of the smart grid (interested readers are referred to for detailed surveys).IETF had recently released a new standard specifying an IPv6-based routing protocol, called Routing Protocol for Low Power and Lossy Networks (RPL), which is rapidly emerging as the most mature and commercially viable routing solution for large-scale AMI systems. Specifically, RPL organizes the network topology into a tree-based structure (called Directed Acyclic Graph, DAG) and it adopts a gradient-based data forwarding scheme to minimize memory usage and protocol complexity. Given the importance of RPL applications, a few papers have addressed the performance evaluation of RPL in different use cases.In particular, results shown in for a medium-scale outdoor network deployment indicate that RPL ensures smaller routing tables and lower control overheads than conventional shortestpath routing algorithms. On the other hand, the study in points out that RPL nodes may suffer from severe unreliability problems, mainly because RPL often selects suboptimal paths with low quality links. Other studies have focused on proposing enhancements to the basic RPL standard. The work in proposes to construct the DAG assigning to each link in the network a cost depending on the ETX metric, a popular routing metric initially proposed for wireless multi-hop routing protocols.In extensions to RPL are proposed to enable smart meters to automatically discover connectivity and recover from loss of connectivity. The effectiveness of the local repair mechanisms used in RPL is also investigated in. However, RPL applicability in largescale (thousands of nodes) networks with stringent reliability requirements is still an open issue.In addition, the stability of DAG structure with accurate PLC channel models and real-world traffic patterns needs to be examined.

3-1.To allow communications in a distributed network formed by devices from different vendors and using heterogeneous communication technologies, it is necessary to specify a suite of protocols to: (i) associate node identities to network devices (naming and addressing functions), (ii) establish network paths between nodes (routing function); (iii) define message formats and rules to exchange those messages (transport function); and (iv) support advanced networking services such as broadcast, multicast, QoS and security. 
3-2.A comprehensive overview of all the network protocols and services that have been proposed in the literature for smart grid communications might require a separate survey per se. #relationship:A# 3-3.Thus, we focus on three important areas that we believe still entail major research challenges: (1) routing protocols, (2) QoS support, and (3) transport protocols. 
3-4.Routing protocols As observed above, routing protocols are responsible for establishing communication paths among nodes i a nnetwork. #relationship:0# 3-5.As discussed in Section , in a smart grid different classes of devices, communication technologies and network topologies will be used depending on applications and use cases. #relationship:0# 3-6.This implies that multiple routing protocols should be employed to enable smart grid communications in the different networks forming the smart grid communication infrastructure. #relationship:D# 3-7.It is important to point out that in the past electric utilities preferred to avoid using routing protocols to communicate with field devices due to potential ðaÞ real-time violations and security attacks. #relationship:B# 3-8.However, as motivated in Section  electrical grids are progressively migrating towards IPbased network architectures. #relationship:A# 3-9.Therefore, it is expected that routing protocols will be increasingly more important, especially in the access tier of the smart grid communication system.
3-10.It is out of the scope of this survey to outline all the different routing protocols that have been proposed so far for the various network categories described in Section Interested readers can find a comprehensive survey of routing protocols for HAN and NANs in. #relationship:B# 3-11.On the contrary, in the following we focus our attention on routing and data forwarding schemes for networks using wireless multi-hop communications (WMNs and WSNs) because we believe this is the area in which most research challenges are yet to be addressed, especially as far as QoS support is concerned. #relationship:C# 3-12.For the sake of clarity, in we provide a classification of the research trends in the area of routing for smart grids, which we have analyzed in the following. 
3-13.In the literature there exists a large amount of work on routing for ad hoc networks, as testified by the considerable number of different protocols that have been proposed, and the standardization of few of them by the IETF MANET working group. #relationship:D# 3-14.Furthermore, a number of surveys can be found on this area, which provide comprehensive classifications and comparisons of existing routing approaches. 
3-15.Relevant to this survey are the studies that are dedicated to the development of a more solid understanding on the applicability of those routing approaches in the smart grid domain, and AMI systems in particular. #relationship:D# 3-16.One of the main findings of those studies is that geographic routing strategies, which use geographical coordinates of networks nodes to optimize the path selection (selecting as intermediate relay the node that is geographically the closest one to the final destination), seem the best schemes for smart grid communications because they minimize routing overheads and they work particularly well in static networks. #relationship:C# 3-17.For instance, the authors in consider an exemplifying PLC network used in low- and medium-voltage distribution grids, and show how different location- based routing strategies cope with variable link qualities and node failures. #relationship:D# 3-18.Another research area related to routing in smart grid networks include the adaptation of routing schemes designed for generalpurpose WMNs to the context of smart grid communications.
3-19.In, the reliability of the AODV routing protocol is investigated in a distribution grid topology that spans many kilometers. 
3-20.A new multi-path routing protocol for multi-channel WMNs, called DMMR, is proposed in, which tends to choose paths that do not share network nodes to reduce the probability that multiple paths are broken at the same time when a single node fails.#relationship:D# 3-21.In this way, DMMR ensures stable end-to-end connections. 
3-22.Other works have explored the applicability of the Hybrid Wireless Mesh Protocol, or HWMP, specified in the IEEE 801s standard, for routing in WMNs that are used for the monitoring and management of electric grids. 
3-23.HWMP operates directly at the link layer and it uses MAC addresses for routing instead of IP addresses. #relationship:D# 3-24.Furthermore, it is an hybrid protocol that adopts a tree-based hierarchical routing scheme for data transfers from network nodes to mesh gateways, and an AODV-like routing scheme for data transfers between network nodes. #relationship:C# 3-25.A known issue of HWMP is route instability in case of link failures and the work in proposes new routing metrics to reduce route fluctuations. #relationship:D# 3-26.A multipath extension to the tree-based routing strategy used in HWMP is also described in. 
3-27.Alternative tree-based routing schemes are proposed in by employing data forwarding mechanisms inspired by distributed depth-first search algorithms. #relationship:D# 3-28.Furthermore, to reduce network control overheads those schemes use data packets to detect loops and to propagate the information on failed links.#relationship:D# 3-29.In this way, routing tables can be updated quickly and with little overhead. #relationship:D# 3-30.Another considerable amount of work has been conducted on the design of routing protocols for WSNs that are able to cope with the limitation of computing power and memory size of embedded devices.
3-31.Indeed, many of the devices installed in the last mile of an AMI network, such as home appliances, IEDs, and smart meters will be based on tiny micro controllers. #relationship:D# 3-32.Most of the above-described routing protocols for WMNs are not applicable to those devices because they perform complex computations and store a large amount of routing information. #relationship:A# 3-33.For these reasons, popular wireless standards for sensor and control systems, such as ZigBee and WirelessHART, have implemented much simpler routing schemes. #relationship:D# 3-34.Specifically, ZigBee specification include three routing protocols: (1), a treebased routing scheme for data collection at the network sink, (2) a variant of the AODV algorithm that is used to establish on-demand multi-hop network paths, and (3) a source routing for communications between the sink node and the end devices.
3-35.It is also important to point out that in the last few years there has been a growing interest from the research community in designing optimized networking protocols for WSNs, which could potentially match the requirements of the smart grid (interested readers are referred to for detailed surveys).
3-36.IETF had recently released a new standard specifying an IPv6-based routing protocol, called Routing Protocol for Low Power and Lossy Networks (RPL), which is rapidly emerging as the most mature and commercially viable routing solution for large-scale AMI systems. #relationship:D# 3-37.Specifically, RPL organizes the network topology into a tree-based structure (called Directed Acyclic Graph, DAG) and it adopts a gradient-based data forwarding scheme to minimize memory usage and protocol complexity. 
3-38.Given the importance of RPL applications, a few papers have addressed the performance evaluation of RPL in different use cases. #relationship:C# 3-39.In particular, results shown in for a medium-scale outdoor network deployment indicate that RPL ensures smaller routing tables and lower control overheads than conventional shortestpath routing algorithms. #relationship:D# 3-40.On the other hand, the study in points out that RPL nodes may suffer from severe unreliability problems, mainly because RPL often selects suboptimal paths with low quality links. #relationship:D# 3-41.Other studies have focused on proposing enhancements to the basic RPL standard. 
3-42.The work in proposes to construct the DAG assigning to each link in the network a cost depending on the ETX metric, a popular routing metric initially proposed for wireless multi-hop routing protocols.
3-43.In extensions to RPL are proposed to enable smart meters to automatically discover connectivity and recover from loss of connectivity. 
3-44.The effectiveness of the local repair mechanisms used in RPL is also investigated in. #relationship:B# 3-45.However, RPL applicability in largescale (thousands of nodes) networks with stringent reliability requirements is still an open issue. #relationship:D# 3-46.In addition, the stability of DAG structure with accurate PLC channel models and real-world traffic patterns needs to be examined.

4.In Section we have observed that reliability and timeliness are key requirements for smart grid communications. However, different smart grid applications may have different constraints for latencies and communication reliability. For instance, in basic metering applications a delay of few seconds when collecting metered data is tolerable, while applications monitoring transmission lines should operate on a time scale of few milliseconds. Similarly, most grid protection applications, which involve the remote control of critical grid components such as breakers and switches, require very high levels of communication reliability to avoid power grid instability. Consequently, the smart grid communication infrastructure should adopt suitable mechanisms to enforce different QoS guarantees to network flows depending on the application constraints.In telecommunications networks QoS differentiation is typically achieved through resource reservation and traffic prioritization. Specifically, various approaches can be employed to prioritize important and time-critical network flows over less critical data traffic. For instance, many MAC layers support the specification of different traffic categories and they use scheduling algorithms to provide bandwidth differentiation. However, MAC-based solutions are generally limited to provide QoS guarantees on single communication links. For this reason, there is an increasing awareness that a full-fledged QoS-based architecture is needed to satisfy the different requirements of smart grid applications. Several QoS-based frameworks have been proposed for the Internet, such as Integrated Services (IntServ), Differentiated Services (DiffServ), and Multi-Protocol Label Switching (MPLS), which could be applied also in smart grid communication networks.It is out of the scope of this work to present a description of those solutions. However, we want to remark that it is still an open issue to decide which of those QoS-based architectures is the most appropriate for the smart grid domain. The study in proposes to use MPLS technologies to handle fine-grained bandwidth management in smart grids communication systems, while the study in discusses how to integrate MPLS with DiffServ. A multi-service routing architecture is described in, which uses the DiffServ model in the data plane, the RTCP protocol for performance monitoring and multi-service path calculation in the control plane. A detailed and fair comparison of different QoS approaches, and their testing in real-world deployment are still missing. Note that recently most of the research efforts in this area have been focused on the development of optimization frameworks to compute network paths that satisfy multiple QoS constraints simultaneously (also known as constrainedbased routing or QoS routing), because this is an essential feature for any communication infrastructure that aims at guaranteeing QoS. A comprehensive survey of existing algorithms for constrained-based routing can be found in. Given the heterogeneity of the smart grid, traditional methodologies cannot be directly applied due to the requirements of high computing and storage capabilities. Thus, new schemes are needed that can be implemented by both powerful and resource-limited devices. Preliminary results on QoS routing solutions specific to smart grids have been developed in. However, it is still an open problem to understand the impact of power system dynamics on the stability of QoS routing, or how to define QoS requirements in the context of smart grid.  Transport protocol Transport protocols are responsible for delivering data among application processes running on separate hosts in a network. Besides simple inter-process communications there are many other services that can be optionally provided by a transport protocol, such as data integrity, congestion avoidance and flow control. The simplest transport protocol in the Internet protocol suite is UDP, which is connection-less and it does not provide any guarantee on packet delivery. However, UDP can be used tighter with the Real-time Transport Protocol (RTP), which provides specific mechanisms to improve the delivery of audio and video over IP networks. For instance, RTP packets carry information (time stamp) that allows to implement jitter compensation at the receivers. Furthermore, RTP supports data transfer to multiple destinations through IP multicast. On the other hand, the most common alternative to UDP is the Transport Control Protocol (TCP). TCP is more sophisticated than UDP because: (i) it provides connectionoriented communications, (ii) it uses message numbering and retransmissions to recover packet losses and suppressed duplicate data, (iii) it supports reordering of outof-order data, and (iv) it implements flow and congestion control techniques. Since the majority of smart grid applications require reliable communications, TCP seems the natural choice also for the smart grid communication system. However, TCP does not provide guarantees on network delays experienced by transmitted packets. In addition, the timeouts used to detect some packet losses can cause noticeably delay spikes. Thus, TCP cannot adequately meet the requirements of smart grid communications in terms of timely data delivery, especially for data traffic that it is inherently periodic (metering readings, measurements from PMUs). Furthermore, data sources in most smart grid applications generate smallsized packets at a low rate.In this case, TCP congestion control can be ineffective and it can cause useless retransmissions of packets and throughput degradations. For these reasons, a few studies have been recently conducted to design either suitable modifications to TCP or totally new transport protocols in order to achieve lower latency while preserving reliability in data-collection applications. One example is the scalable and secure transport protocol that is proposed in, called SSTP, which is suitable for monitoring applications in which a large number of clients infrequently communicate with servers. More specifically, one of the main goals of SSTP is scalability, and this is achieved by assuming that the server does not continuously maintain state information for each session (sensor device) but it encrypts the session state and it transmits the encrypted information to the associated client, which temporarily stores it. Then, the client returns to the server the encrypted state with his next message. Furthermore, SSTP assumes that in-order delivery is not required as data is always timestamped at the sender side. Finally, a SSTP client can immediately send a message without any delay unless its sending window, whose size is determined by the number of clients associated to the same server, is full. Results shown in indicate that SSTP can provide much lower end-to-end delays than TCP. An alternative approach, called Split and Aggregated TCP (SA-TCP), is proposed in, which employs split and aggregation techniques. More specifically, in SA-TCP each client creates a TCP connection with a single intermediate node, called transport aggregator, which is deployed before a bottleneck link. Then, this node aggregates all received data and it creates another TCP connection with the final data collector.In this way, a bottleneck can be shared between many meters more fairly and the number of packet retransmissions is reduced. On the downside, TCP splitting approaches are more vulnerable to security attacks, and packets may suffer longer delays. An alternative congestion control technique is proposed in by adapting the monitoring rate of smart meters to the available bandwidth. The basic idea is to formulate an optimization problem to determine which is the amount of traffic that can be reduced at different locations in the network without affecting the grid operations.It is also useful to point out that there is a large body of work focusing on reliable data collection protocols for WSNs (see for survey papers on this area). However, those transport protocols can not be applied to smart grid monitoring applications without substantial modifications for a number of reasons: (i) in smart grid each packet conveys unique information associated to a specific meter at a given time instant, thus data aggregation techniques cannot significantly reduce the total volume of data traffic to be delivered, and (ii) redundant deployment is not a feasible solution for achieving reliability because smart meters identify specific end users.

4-1.In Section we have observed that reliability and timeliness are key requirements for smart grid communications. #relationship:B# 4-2.However, different smart grid applications may have different constraints for latencies and communication reliability. #relationship:C# 4-3.For instance, in basic metering applications a delay of few seconds when collecting metered data is tolerable, while applications monitoring transmission lines should operate on a time scale of few milliseconds. #relationship:D# 4-4.Similarly, most grid protection applications, which involve the remote control of critical grid components such as breakers and switches, require very high levels of communication reliability to avoid power grid instability. #relationship:D# 4-5.Consequently, the smart grid communication infrastructure should adopt suitable mechanisms to enforce different QoS guarantees to network flows depending on the application constraints.
4-6.In telecommunications networks QoS differentiation is typically achieved through resource reservation and traffic prioritization. #relationship:D# 4-7.Specifically, various approaches can be employed to prioritize important and time-critical network flows over less critical data traffic. #relationship:C# 4-8.For instance, many MAC layers support the specification of different traffic categories and they use scheduling algorithms to provide bandwidth differentiation. #relationship:B# 4-9.However, MAC-based solutions are generally limited to provide QoS guarantees on single communication links. #relationship:A# 4-10.For this reason, there is an increasing awareness that a full-fledged QoS-based architecture is needed to satisfy the different requirements of smart grid applications. 
4-11.Several QoS-based frameworks have been proposed for the Internet, such as Integrated Services (IntServ), Differentiated Services (DiffServ), and Multi-Protocol Label Switching (MPLS), which could be applied also in smart grid communication networks. #relationship:0# 4-12.It is out of the scope of this work to present a description of those solutions. #relationship:B# 4-13.However, we want to remark that it is still an open issue to decide which of those QoS-based architectures is the most appropriate for the smart grid domain. 
4-14.The study in proposes to use MPLS technologies to handle fine-grained bandwidth management in smart grids communication systems, while the study in discusses how to integrate MPLS with DiffServ. 
4-15.A multi-service routing architecture is described in, which uses the DiffServ model in the data plane, the RTCP protocol for performance monitoring and multi-service path calculation in the control plane. 
4-16.A detailed and fair comparison of different QoS approaches, and their testing in real-world deployment are still missing. #relationship:D# 4-17.Note that recently most of the research efforts in this area have been focused on the development of optimization frameworks to compute network paths that satisfy multiple QoS constraints simultaneously (also known as constrainedbased routing or QoS routing), because this is an essential feature for any communication infrastructure that aims at guaranteeing QoS. 
4-18.A comprehensive survey of existing algorithms for constrained-based routing can be found in. 
4-19.Given the heterogeneity of the smart grid, traditional methodologies cannot be directly applied due to the requirements of high computing and storage capabilities. #relationship:A# 4-20.Thus, new schemes are needed that can be implemented by both powerful and resource-limited devices. 
4-21.Preliminary results on QoS routing solutions specific to smart grids have been developed in. #relationship:B# 4-22.However, it is still an open problem to understand the impact of power system dynamics on the stability of QoS routing, or how to define QoS requirements in the context of smart grid.  
4-23.Transport protocol Transport protocols are responsible for delivering data among application processes running on separate hosts in a network. #relationship:D# 4-24.Besides simple inter-process communications there are many other services that can be optionally provided by a transport protocol, such as data integrity, congestion avoidance and flow control. 
4-25.The simplest transport protocol in the Internet protocol suite is UDP, which is connection-less and it does not provide any guarantee on packet delivery. #relationship:B# 4-26.However, UDP can be used tighter with the Real-time Transport Protocol (RTP), which provides specific mechanisms to improve the delivery of audio and video over IP networks. #relationship:C# 4-27.For instance, RTP packets carry information (time stamp) that allows to implement jitter compensation at the receivers. #relationship:D# 4-28.Furthermore, RTP supports data transfer to multiple destinations through IP multicast. #relationship:D# 4-29.On the other hand, the most common alternative to UDP is the Transport Control Protocol (TCP). #relationship:D# 4-30.TCP is more sophisticated than UDP because: (i) it provides connectionoriented communications, (ii) it uses message numbering and retransmissions to recover packet losses and suppressed duplicate data, (iii) it supports reordering of outof-order data, and (iv) it implements flow and congestion control techniques. 
4-31.Since the majority of smart grid applications require reliable communications, TCP seems the natural choice also for the smart grid communication system. #relationship:B# 4-32.However, TCP does not provide guarantees on network delays experienced by transmitted packets. #relationship:D# 4-33.In addition, the timeouts used to detect some packet losses can cause noticeably delay spikes. #relationship:A# 4-34.Thus, TCP cannot adequately meet the requirements of smart grid communications in terms of timely data delivery, especially for data traffic that it is inherently periodic (metering readings, measurements from PMUs). #relationship:D# 4-35.Furthermore, data sources in most smart grid applications generate smallsized packets at a low rate. #relationship:D# 4-36.In this case, TCP congestion control can be ineffective and it can cause useless retransmissions of packets and throughput degradations. #relationship:A# 4-37.For these reasons, a few studies have been recently conducted to design either suitable modifications to TCP or totally new transport protocols in order to achieve lower latency while preserving reliability in data-collection applications. #relationship:C# 4-38.One example is the scalable and secure transport protocol that is proposed in, called SSTP, which is suitable for monitoring applications in which a large number of clients infrequently communicate with servers. #relationship:D# 4-39.More specifically, one of the main goals of SSTP is scalability, and this is achieved by assuming that the server does not continuously maintain state information for each session (sensor device) but it encrypts the session state and it transmits the encrypted information to the associated client, which temporarily stores it. #relationship:D# 4-40.Then, the client returns to the server the encrypted state with his next message. #relationship:D# 4-41.Furthermore, SSTP assumes that in-order delivery is not required as data is always timestamped at the sender side. #relationship:D# 4-42.Finally, a SSTP client can immediately send a message without any delay unless its sending window, whose size is determined by the number of clients associated to the same server, is full. 
4-43.Results shown in indicate that SSTP can provide much lower end-to-end delays than TCP. 
4-44.An alternative approach, called Split and Aggregated TCP (SA-TCP), is proposed in, which employs split and aggregation techniques. #relationship:D# 4-45.More specifically, in SA-TCP each client creates a TCP connection with a single intermediate node, called transport aggregator, which is deployed before a bottleneck link. #relationship:D# 4-46.Then, this node aggregates all received data and it creates another TCP connection with the final data collector. 
4-47.In this way, a bottleneck can be shared between many meters more fairly and the number of packet retransmissions is reduced. #relationship:D# 4-48.On the downside, TCP splitting approaches are more vulnerable to security attacks, and packets may suffer longer delays. 
4-49.An alternative congestion control technique is proposed in by adapting the monitoring rate of smart meters to the available bandwidth. 
4-50.The basic idea is to formulate an optimization problem to determine which is the amount of traffic that can be reduced at different locations in the network without affecting the grid operations. #relationship:D# 4-51.It is also useful to point out that there is a large body of work focusing on reliable data collection protocols for WSNs (see for survey papers on this area). #relationship:B# 4-52.However, those transport protocols can not be applied to smart grid monitoring applications without substantial modifications for a number of reasons: (i) in smart grid each packet conveys unique information associated to a specific meter at a given time instant, thus data aggregation techniques cannot significantly reduce the total volume of data traffic to be delivered, and (ii) redundant deployment is not a feasible solution for achieving reliability because smart meters identify specific end users.

5.Many smart grid applications will require a precise estimation of the state of large portions of the power system in order to control and optimize the electricity delivery and usage. However, not all smart grid applications require the same sets of data, nor the same reporting frequency. For instance, off-line trend analysis does not impose tight delay constraints, while control and protection functions need real-time transmission of data (and commands). Therefore, scalable data management systems specialized for smart grids are needed to share this large amount of information, and to timely deliver relevant data to applications that really need it. In Section  we have pointed out that SCADA systems already include solutions for storing and analyzing data collected from a large number of RTUs. However, those solutions rely primarily on centralized databases, which do not provide the level of scalability and flexibility needed to handle the huge increase in data storage and processing that will occur with smart grids. On the other hand, there is an increasing consensus among electric utilities that middleware technologies are needed to build large-scale data sharing systems because they provide efficient data management services suitable for distributed environments.In addition, middleware can help to successfully handle the inherent complexity of building robust and autonomous control applications in heterogeneous distributed systems. For instance, existing middleware platforms provide various optimized tools and mechanisms for cooperatively controlling complex systems consisting of a large number of highly interconnected and interdependent components operating in dynamic environments.In particular, multi-agent middleware platforms are drawing much attention from researchers in the smart grid area because they appear the most suitable technology to provide self-adaptation and self-healing capabilities to smart grids.In the following sections we will outline the most important middleware platforms proposed so far for smart grid control applications. Note that most middleware platforms are designed following a given model, or paradigm, which describes the approach used to manage communications and distribution of resources. Thus, to guide the following discussion in we also provide a classification of the related work based on three main categories: (i) middleware services for data management; (ii) object-oriented middleware, and (iii) multi-agent systems.

5-1.Many smart grid applications will require a precise estimation of the state of large portions of the power system in order to control and optimize the electricity delivery and usage. #relationship:B# 5-2.However, not all smart grid applications require the same sets of data, nor the same reporting frequency. #relationship:C# 5-3.For instance, off-line trend analysis does not impose tight delay constraints, while control and protection functions need real-time transmission of data (and commands). #relationship:A# 5-4.Therefore, scalable data management systems specialized for smart grids are needed to share this large amount of information, and to timely deliver relevant data to applications that really need it. 
5-5.In Section  we have pointed out that SCADA systems already include solutions for storing and analyzing data collected from a large number of RTUs. #relationship:B# 5-6.However, those solutions rely primarily on centralized databases, which do not provide the level of scalability and flexibility needed to handle the huge increase in data storage and processing that will occur with smart grids. #relationship:D# 5-7.On the other hand, there is an increasing consensus among electric utilities that middleware technologies are needed to build large-scale data sharing systems because they provide efficient data management services suitable for distributed environments. #relationship:D# 5-8.In addition, middleware can help to successfully handle the inherent complexity of building robust and autonomous control applications in heterogeneous distributed systems. #relationship:C# 5-9.For instance, existing middleware platforms provide various optimized tools and mechanisms for cooperatively controlling complex systems consisting of a large number of highly interconnected and interdependent components operating in dynamic environments. #relationship:C# 5-10.In particular, multi-agent middleware platforms are drawing much attention from researchers in the smart grid area because they appear the most suitable technology to provide self-adaptation and self-healing capabilities to smart grids.
5-11.In the following sections we will outline the most important middleware platforms proposed so far for smart grid control applications. #relationship:D# 5-12.Note that most middleware platforms are designed following a given model, or paradigm, which describes the approach used to manage communications and distribution of resources. #relationship:A# 5-13.Thus, to guide the following discussion in we also provide a classification of the related work based on three main categories: (i) middleware services for data management; (ii) object-oriented middleware, and (iii) multi-agent systems.

6.One of the earliest examples of a fullfledged middleware platform supporting data management for smart grid applications is known as GridStat. More specifically, GridStat provides a publish/subscribe communication model in which a grid object can be either a producer or a consumer of data. The consumers can declare to the middleware system their interests in one or more types of data (a data aggregator may be interested in receiving at a higher frequency measurements from a set of smart meters), while the producers simply announce the availability of their data. Then, the middleware platform is responsible for distributing the relevant data to the subscribed consumers.It is important to observe that the communication primitives provided by the middleware simplify the interactions between publishers and subscribers because subscribers do not need to know the identity nor the location of publishers, and vice versa. This decoupling is one of the main features that facilitate large-scale deployments.In the case of GridStat, the publishers are either sources of measurements and control settings (status variables), which are periodically updated by the middleware, or sources of alarm conditions (status alerts) that require immediate attention. On the other hand, subscribers are application programs that use these variables and alerts. Then, the GridStat middleware provides the services needed to control the way information is disseminated and accessed. For instance, a directory service is implemented to allow subscribers to find particular status variables of interest. Moreover, the publishers have the ability to inform the middleware infrastructure about the semantic of the status variables they monitor, such as type, availability frequency, and priority. Similarly, the applications can specify their QoS requirements for data access, such as the maximum delay for receiving status updates, the minimum update frequency, or the maximum number of updates that can be lost per unit time.In order to meet these QoS requirements directly at the middleware layer, the GridStat architecture requires the deployment of two classes of special devices within the smart grid: status routers, which establish redundant paths between the middleware peers to support QoS-aware multicast of periodic status updates; brokers, which are organized into a hierarchy of management entities that negotiate with the subscribers their initial QoS requirements in order to make them less stringent if necessary.In addition, brokers also handle the resource allocation in the communication network to ensure that the selected paths meet the QoS requirements of each subscription request. A Java-based implementation of key mechanisms in the GridStat framework is described and experimentally evaluated in terms of delivery latency and throughput in. Although GridStat offers a flexible and robust communication framework, it also suffers from a series of limitations. First of all, it only supports the publish/ subscribe communication model, which is appropriate for delivering status updates or alerts, while alternative communication services (remote procedure calls for invoking commands) are needed in other use cases.In addition, GridStat relies on a rigid hierarchy of brokers that allocate resources at status routers and configure the network paths to meet the QoS application requirements. This scheme can generate significant signaling overheads. Therefore, other studies have considered alternative approaches based on self-organizing P2P technologies. For instance, a datacentric information infrastructure that uses a publish/subscribe communication model to deliver time-sensitive data between EMSs and distribution substations is designed in. However, in this case the publish/subscribe system is not implemented using a centralized directory service as in, but through a distributed content overlay created over a networked pool of storage disks.In it is assumed that these storage units are installed at substations but also sensors can be allowed to share part of their memory resources. Then, a distributed hash table (DHT) is employed for efficient and scalable data retrieval. More specifically, a hash function is used to generate a unique key per each data item, which is then stored and/or replicated among the peers in the network based on their identifiers.In this way, the overhead of both data storage and data search is evenly distributed among peers. This approach not only addresses the scalability issues caused by centralized storage repositories, but it also ensures improved reliability by avoiding single points of failures.In general, DHT-based overlay networks can ensure a very efficient retrieval of single data items due to the use of key-based routing approaches. Therefore, other papers have proposed to use DHTs for supporting large-scale data sharing and decentralized data repositories. An alternative approach is proposed in, in which a middleware, called SeDAX, is developed to enable secure, large-scale data sharing to support both transaction and query-based communications. Specifically, SeDAX leverages on the properties of Delaunay Triangulation (DT) graphs to design efficient message forwarding schemes based on geometric hash functions. However, the creation and maintenance of a structured overlay network that maps each data key to a peer in the overlay is generally incurring high signaling overheads. Thus, other studies argue that unstructured P2P networks, which do not maintain a rigid overlay network, are more suitable for smart grid applications in which data must be distributed to a large number of interested parties at the same time.
6-1.One of the earliest examples of a fullfledged middleware platform supporting data management for smart grid applications is known as GridStat. #relationship:D# 6-2.More specifically, GridStat provides a publish/subscribe communication model in which a grid object can be either a producer or a consumer of data. 
6-3.The consumers can declare to the middleware system their interests in one or more types of data (a data aggregator may be interested in receiving at a higher frequency measurements from a set of smart meters), while the producers simply announce the availability of their data. #relationship:D# 6-4.Then, the middleware platform is responsible for distributing the relevant data to the subscribed consumers.
6-5.It is important to observe that the communication primitives provided by the middleware simplify the interactions between publishers and subscribers because subscribers do not need to know the identity nor the location of publishers, and vice versa. #relationship:0# 6-6.This decoupling is one of the main features that facilitate large-scale deployments.
6-7.In the case of GridStat, the publishers are either sources of measurements and control settings (status variables), which are periodically updated by the middleware, or sources of alarm conditions (status alerts) that require immediate attention. #relationship:D# 6-8.On the other hand, subscribers are application programs that use these variables and alerts. #relationship:D# 6-9.Then, the GridStat middleware provides the services needed to control the way information is disseminated and accessed. #relationship:C# 6-10.For instance, a directory service is implemented to allow subscribers to find particular status variables of interest. #relationship:D# 6-11.Moreover, the publishers have the ability to inform the middleware infrastructure about the semantic of the status variables they monitor, such as type, availability frequency, and priority. #relationship:D# 6-12.Similarly, the applications can specify their QoS requirements for data access, such as the maximum delay for receiving status updates, the minimum update frequency, or the maximum number of updates that can be lost per unit time.
6-13.In order to meet these QoS requirements directly at the middleware layer, the GridStat architecture requires the deployment of two classes of special devices within the smart grid: status routers, which establish redundant paths between the middleware peers to support QoS-aware multicast of periodic status updates; brokers, which are organized into a hierarchy of management entities that negotiate with the subscribers their initial QoS requirements in order to make them less stringent if necessary. #relationship:D# 6-14.In addition, brokers also handle the resource allocation in the communication network to ensure that the selected paths meet the QoS requirements of each subscription request. 
6-15.A Java-based implementation of key mechanisms in the GridStat framework is described and experimentally evaluated in terms of delivery latency and throughput in. #relationship:B# 6-16.Although GridStat offers a flexible and robust communication framework, it also suffers from a series of limitations. 
6-17.First of all, it only supports the publish/ subscribe communication model, which is appropriate for delivering status updates or alerts, while alternative communication services (remote procedure calls for invoking commands) are needed in other use cases. #relationship:D# 6-18.In addition, GridStat relies on a rigid hierarchy of brokers that allocate resources at status routers and configure the network paths to meet the QoS application requirements. 
6-19.This scheme can generate significant signaling overheads.#relationship:A# 6-20.Therefore, other studies have considered alternative approaches based on self-organizing P2P technologies. #relationship:C# 6-21.For instance, a datacentric information infrastructure that uses a publish/subscribe communication model to deliver time-sensitive data between EMSs and distribution substations is designed in. #relationship:B# 6-22.However, in this case the publish/subscribe system is not implemented using a centralized directory service as in, but through a distributed content overlay created over a networked pool of storage disks. #relationship:0# 6-23.In it is assumed that these storage units are installed at substations but also sensors can be allowed to share part of their memory resources. #relationship:D# 6-24.Then, a distributed hash table (DHT) is employed for efficient and scalable data retrieval. #relationship:D# 6-25.More specifically, a hash function is used to generate a unique key per each data item, which is then stored and/or replicated among the peers in the network based on their identifiers. #relationship:D# 6-26.In this way, the overhead of both data storage and data search is evenly distributed among peers. #relationship:0# 6-27.This approach not only addresses the scalability issues caused by centralized storage repositories, but it also ensures improved reliability by avoiding single points of failures.
6-28.In general, DHT-based overlay networks can ensure a very efficient retrieval of single data items due to the use of key-based routing approaches. #relationship:A# 6-29.Therefore, other papers have proposed to use DHTs for supporting large-scale data sharing and decentralized data repositories. 
6-30.An alternative approach is proposed in, in which a middleware, called SeDAX, is developed to enable secure, large-scale data sharing to support both transaction and query-based communications. #relationship:D# 6-31.Specifically, SeDAX leverages on the properties of Delaunay Triangulation (DT) graphs to design efficient message forwarding schemes based on geometric hash functions. #relationship:B# 6-32.However, the creation and maintenance of a structured overlay network that maps each data key to a peer in the overlay is generally incurring high signaling overheads. #relationship:A# 6-33.Thus, other studies argue that unstructured P2P networks, which do not maintain a rigid overlay network, are more suitable for smart grid applications in which data must be distributed to a large number of interested parties at the same time.

7.The middleware solutions described in the previous section were primarily targeting the scalability of data dissemination and data sharing functions. However, as discussed in Section , interoperability between different devices, networks and communication technologies is another key requirement that smart grid communication systems must satisfy. The middleware paradigm that is commonly considered the most suitable for supporting interoperability between heterogeneous distributed systems is the object-oriented paradigm. Specifically, in object-oriented middleware platforms, like CORBA or Ice, resources, processes and components are abstract objects that implement standard interfaces, which hide all internal implementation details of the object. Furthermore, the object abstraction allows to invoke services or make calls to procedures on remote systems by also hiding the differences of underlying networking technologies. This distributed object-oriented paradigm is used in CoSGrid (Controlling the Smart Grid), a middleware that provides support to specify special remote objects called embedding metering devices (EMDs).An EMD implements sensing and controlling capabilities, share information via remote method invocations, and it can be used to manage arbitrary smart grid components, from individual appliances to entire substations. EMD prototypes for different types of devices that work with CORBA and Ice are described in. In addition, CoSGrid defines a set of interfaces for basic smart grid services, such as metering, notification, node and data aggregation, which can be used to ease the development of new distributed smart grid applications. A similar approach is followed by OHNet (Objected-based Middleware for Home Network), an object-oriented middleware for supporting the interoperability between home devices and smart grid devices.In this system home devices can be associated to state, function, control or streaming objects on the basis of their features, while discovery, connection and management objects are used to activate related functions on home devices. Then, OHNet ensures interoperability among devices, which may adopt different communication protocols and technologies, through the definition of the Virtual Network Adapter (VNA). Specifically, VNA is an abstraction layer that instantiates the invocations of abstract methods into protocol-dependent implementations. An alternative approach to build a Cyber-Physical Home Control System, , a system that allows users to control appliances in the physical environment by intuitive operation through a virtual home on the network, is proposed in. The key idea is to use an OSGi-based service architecture to support service-oriented remote control methods for home appliances. Note that the design of user-friendly and service-oriented HEMSs is a very active research area. For instance, the authors of describe a system to control and manage home appliances in the framework of Universal Plug-and-Play (UPnP). Finally, the OSGi platform is also used in to construct a general middleware for IoT applications involving RFID tagged objects, sensor networks and pervasive computing technologies. Finally, it is worth noting that in the power engineering community there is an increasing consensus on the importance of the object-oriented paradigm, especially for the specification of interoperability standards. One example is the Common Information Model (CIM), which is a series of open standards released by the International Electrotechnical Commission (IEC) to allow different applications to exchange information about the status of electric grid components. For instance, CIM-based models have been proposed to exchange power system data between: (i) energy management systems (IEC 61970 standards), (ii) electrical distribution systems (IEC 61968 standards), and (iii) intelligent electric devices within substations (EC 61850 standards). Then, CIM-based standards provide a common vocabulary to formally describe all the major components of a power system. Support is also provided to define multiple object classes and attributes, as well as the relationships between them. Furthermore, the CIM architecture supports composition of different classes and attributes, which facilitates model flexibility and extensibility. However, it is important to note that CIM only facilitates the exchange of power system data in objectoriented communication systems, but how to extract useful information from an abstract representation of the power data is still an open issue.

7-1.The middleware solutions described in the previous section were primarily targeting the scalability of data dissemination and data sharing functions. #relationship:B# 7-2.However, as discussed in Section , interoperability between different devices, networks and communication technologies is another key requirement that smart grid communication systems must satisfy. 
7-3.The middleware paradigm that is commonly considered the most suitable for supporting interoperability between heterogeneous distributed systems is the object-oriented paradigm. #relationship:D# 7-4.Specifically, in object-oriented middleware platforms, like CORBA or Ice, resources, processes and components are abstract objects that implement standard interfaces, which hide all internal implementation details of the object. #relationship:D# 7-5.Furthermore, the object abstraction allows to invoke services or make calls to procedures on remote systems by also hiding the differences of underlying networking technologies. #relationship:0# 7-6.This distributed object-oriented paradigm is used in CoSGrid (Controlling the Smart Grid), a middleware that provides support to specify special remote objects called embedding metering devices (EMDs).
7-7.An EMD implements sensing and controlling capabilities, share information via remote method invocations, and it can be used to manage arbitrary smart grid components, from individual appliances to entire substations. #relationship:0# 7-8.EMD prototypes for different types of devices that work with CORBA and Ice are described in. #relationship:D# 7-9.In addition, CoSGrid defines a set of interfaces for basic smart grid services, such as metering, notification, node and data aggregation, which can be used to ease the development of new distributed smart grid applications. 
7-10.A similar approach is followed by OHNet (Objected-based Middleware for Home Network), an object-oriented middleware for supporting the interoperability between home devices and smart grid devices. #relationship:0# 7-11.In this system home devices can be associated to state, function, control or streaming objects on the basis of their features, while discovery, connection and management objects are used to activate related functions on home devices. #relationship:D# 7-12.Then, OHNet ensures interoperability among devices, which may adopt different communication protocols and technologies, through the definition of the Virtual Network Adapter (VNA). #relationship:D# 7-13.Specifically, VNA is an abstraction layer that instantiates the invocations of abstract methods into protocol-dependent implementations. 
7-14.An alternative approach to build a Cyber-Physical Home Control System, , a system that allows users to control appliances in the physical environment by intuitive operation through a virtual home on the network, is proposed in. 
7-15.The key idea is to use an OSGi-based service architecture to support service-oriented remote control methods for home appliances. #relationship:D# 7-16.Note that the design of user-friendly and service-oriented HEMSs is a very active research area. #relationship:C# 7-17.For instance, the authors of describe a system to control and manage home appliances in the framework of Universal Plug-and-Play (UPnP). #relationship:D# 7-18.Finally, the OSGi platform is also used in to construct a general middleware for IoT applications involving RFID tagged objects, sensor networks and pervasive computing technologies. #relationship:D# 7-19.Finally, it is worth noting that in the power engineering community there is an increasing consensus on the importance of the object-oriented paradigm, especially for the specification of interoperability standards. #relationship:C# 7-20.One example is the Common Information Model (CIM), which is a series of open standards released by the International Electrotechnical Commission (IEC) to allow different applications to exchange information about the status of electric grid components. #relationship:C# 7-21.For instance, CIM-based models have been proposed to exchange power system data between: (i) energy management systems (IEC 61970 standards), (ii) electrical distribution systems (IEC 61968 standards), and (iii) intelligent electric devices within substations (EC 61850 standards). #relationship:D# 7-22.Then, CIM-based standards provide a common vocabulary to formally describe all the major components of a power system. 
7-23.Support is also provided to define multiple object classes and attributes, as well as the relationships between them. #relationship:D# 7-24.Furthermore, the CIM architecture supports composition of different classes and attributes, which facilitates model flexibility and extensibility. #relationship:B# 7-25.However, it is important to note that CIM only facilitates the exchange of power system data in objectoriented communication systems, but how to extract useful information from an abstract representation of the power data is still an open issue.

8.As observed at the beginning of this section, smart grids are complex systems consisting of a large number of heterogeneous and interdependent components operating in dynamic environments. Therefore, decentralized management is considered the only feasible approach to control the operations of electric grids over multiple time-scales. However, with decentralized control it is difficult to achieve global optimization objectives, such as efficiency and stability of the entire grid. On the other hand, recently the emerging field of autonomic distributed computing has produced innovative middleware technologies to build intelligent distributed systems that are capable of managing, repairing, optimizing and protecting themselves without human intervention. Among the various approaches that have been proposed so far to implement autonomic management capabilities in distributed environments, multi-agent systems (MAS in short) are the most popular in the smart grid research community. This is also demonstrated by the large number of multi-agent systems that have been designed for a variety of smart grid applications, including power system restoration, fault diagnosis, management of distributed energy resources, demand-side management, management of energy storage systems, optimization of EV operations[267–269,53], substation automation, distribution control, network monitoring and visualization, electricity market simulation, profiling of power generation and energy usage patterns, management of micro- grids and VPPs. A MAS is a software system that is composed of multiple autonomous components – the intelligent agents – that interact with each other and react to environmental changes in order to accomplish a given task (to control a physical resource, or to solve a complex problem in a distributed manner).In the simplest case agents are reactive objects that can only respond to signals from the environment. In more advanced systems, agents can also be proactive in the sense that they are programmed to execute different actions in order to achieve a global goal.In addition, agents can cooperate and coordinate with each other in order to find the best sequence of actions that could achieve that goal. To this end agents can employ various artificial intelligence techniques, including machine learning, fuzzy logic, neural networks or genetic algorithms for local decision making. Although an agent can show a high degree of flexibility and autonomy because it can dynamically change its behavior to achieve a given goal, it is also subject to an important limitation. Specifically, given the scale of the system to control the agent can only observe and measure small portions of the grid (the environment is only partially observable). This implies that an agent can not use global knowledge to make its decisions. Finally, it is useful to observe that the environment that is observable by a MAS can be either physical (transmission lines, generators of renewable energy, electrical appliances, ), and in this case it is observed through sensors; or virtual (databases, computing facilities, other agents), and in this case it is observable through programming interfaces. From the above discussion we can observe that the main advantage of agent-based technologies in smart grids is to provide a decentralized management solution based on autonomous local decisions that can ensure a high level of flexibility and robustness. Although there are already many smart grid applications where MAS technologies have been investigated, there are also unsolved technical issues, which must be addressed in order to use this technology in real-world deployments.In the following we outline three of the most important technical challenges.

8-1.As observed at the beginning of this section, smart grids are complex systems consisting of a large number of heterogeneous and interdependent components operating in dynamic environments. #relationship:A# 8-2.Therefore, decentralized management is considered the only feasible approach to control the operations of electric grids over multiple time-scales. #relationship:B# 8-3.However, with decentralized control it is difficult to achieve global optimization objectives, such as efficiency and stability of the entire grid. #relationship:D# 8-4.On the other hand, recently the emerging field of autonomic distributed computing has produced innovative middleware technologies to build intelligent distributed systems that are capable of managing, repairing, optimizing and protecting themselves without human intervention. 
8-5.Among the various approaches that have been proposed so far to implement autonomic management capabilities in distributed environments, multi-agent systems (MAS in short) are the most popular in the smart grid research community. #relationship:0# 8-6.This is also demonstrated by the large number of multi-agent systems that have been designed for a variety of smart grid applications, including power system restoration, fault diagnosis, management of distributed energy resources, demand-side management, management of energy storage systems, optimization of EV operations[267–269,53], substation automation, distribution control, network monitoring and visualization, electricity market simulation, profiling of power generation and energy usage patterns, management of micro- grids and VPPs. 
8-7.A MAS is a software system that is composed of multiple autonomous components – the intelligent agents – that interact with each other and react to environmental changes in order to accomplish a given task (to control a physical resource, or to solve a complex problem in a distributed manner).
8-8.In the simplest case agents are reactive objects that can only respond to signals from the environment. #relationship:D# 8-9.In more advanced systems, agents can also be proactive in the sense that they are programmed to execute different actions in order to achieve a global goal. #relationship:D# 8-10.In addition, agents can cooperate and coordinate with each other in order to find the best sequence of actions that could achieve that goal. #relationship:0# 8-11.To this end agents can employ various artificial intelligence techniques, including machine learning, fuzzy logic, neural networks or genetic algorithms for local decision making. #relationship:B# 8-12.Although an agent can show a high degree of flexibility and autonomy because it can dynamically change its behavior to achieve a given goal, it is also subject to an important limitation.  #relationship:D# 8-13.Specifically, given the scale of the system to control the agent can only observe and measure small portions of the grid (the environment is only partially observable). 
8-14.This implies that an agent can not use global knowledge to make its decisions.  #relationship:D# 8-15.Finally, it is useful to observe that the environment that is observable by a MAS can be either physical (transmission lines, generators of renewable energy, electrical appliances, ), and in this case it is observed through sensors; or virtual (databases, computing facilities, other agents), and in this case it is observable through programming interfaces. 
8-16.From the above discussion we can observe that the main advantage of agent-based technologies in smart grids is to provide a decentralized management solution based on autonomous local decisions that can ensure a high level of flexibility and robustness. #relationship:B# 8-17.Although there are already many smart grid applications where MAS technologies have been investigated, there are also unsolved technical issues, which must be addressed in order to use this technology in real-world deployments. #relationship:B# 8-18.In the following we outline three of the most important technical challenges.

9.A number of different functional architectures have been proposed in literature to build multi-agent systems, but there is not yet a consensus on which one of those approaches is the most suitable for smart grid applications.It is important to observe that flexible, extensible, and open architectures, where agents can be easily added or removed, should be preferred to closed architectures, where agent interactions are fixed at design time. The architectural model most commonly adopted in power systems is the multi-layered architecture. For instance, in a threelayer architecture is proposed for managing distributed energy resources.In this model, the bottom layer consists of agents managing physical resources (energy generators and power storage systems). The middle layer includes agents that provide high-level management services (fault diagnosis, protection and restoration, optimization of power parameters, )to the agents connected to the physical resources. Finally, the top layer contains the agents handling the user interfaces. To improve the scalability of MAS solutions many studies have proposed to group agents, especially those operating on physical resources, into clusters (a micro-grid cluster or a VPP cluster).Indeed, clustering and coalition formation are common techniques in multi-agent systems for reducing architecture complexity. For instance in coalitions are used to integrate in a more efficient way electric vehicles into the electricity grid.In this case an aggregator agent, called coalition server, is used to hide the details about the individual vehicles, and to present a group of vehicles as a single resource to grid operators. Alternative two-layer architecture models are considered in for power system restoration, and in for the management of the distribution grid. More precisely, in two types of agents are considered: equipment agents and facilitator agents. The former are controlling physical resources, such as transmission lines, transformers and phase controllers, while the latter are used to promote the cooperation of the equipment agents that are associated to them. For instance, in a facilitator agent is responsible for controlling an entire electric substation. A more elaborate architecture is described in, which defines multiple types of facilitators that perform different tasks such as: device control, data acquisition and transfer, data analysis and data querying. The use of facilitator agents is also proposed in. However, in this case the facilitator agent is responsible for maintaining a list of services (or resources) that other agents in the system can offer (or control). With the support of a nameserver agent, which maintains the names and locations of each agent (IP addresses), a facilitator allows other agents to dynamically enter/ leave the system and register/deregister their locations and capabilities.

9-1.A number of different functional architectures have been proposed in literature to build multi-agent systems, but there is not yet a consensus on which one of those approaches is the most suitable for smart grid applications. #relationship:D# 9-2.It is important to observe that flexible, extensible, and open architectures, where agents can be easily added or removed, should be preferred to closed architectures, where agent interactions are fixed at design time. 
9-3.The architectural model most commonly adopted in power systems is the multi-layered architecture. #relationship:C# 9-4.For instance, in a threelayer architecture is proposed for managing distributed energy resources. #relationship:0# 9-5.In this model, the bottom layer consists of agents managing physical resources (energy generators and power storage systems). 
9-6.The middle layer includes agents that provide high-level management services (fault diagnosis, protection and restoration, optimization of power parameters, )to the agents connected to the physical resources. #relationship:D# 9-7.Finally, the top layer contains the agents handling the user interfaces. 
9-8.To improve the scalability of MAS solutions many studies have proposed to group agents, especially those operating on physical resources, into clusters (a micro-grid cluster or a VPP cluster).
9-9.Indeed, clustering and coalition formation are common techniques in multi-agent systems for reducing architecture complexity. #relationship:C# 9-10.For instance in coalitions are used to integrate in a more efficient way electric vehicles into the electricity grid. #relationship:0# 9-11.In this case an aggregator agent, called coalition server, is used to hide the details about the individual vehicles, and to present a group of vehicles as a single resource to grid operators. 
9-12.Alternative two-layer architecture models are considered in for power system restoration, and in for the management of the distribution grid. #relationship:C# 9-13.More precisely, in two types of agents are considered: equipment agents and facilitator agents. #relationship:C# 9-14.The former are controlling physical resources, such as transmission lines, transformers and phase controllers, while the latter are used to promote the cooperation of the equipment agents that are associated to them. #relationship:C# 9-15.For instance, in a facilitator agent is responsible for controlling an entire electric substation. 
9-16.A more elaborate architecture is described in, which defines multiple types of facilitators that perform different tasks such as: device control, data acquisition and transfer, data analysis and data querying. #relationship:D# 9-17.The use of facilitator agents is also proposed in. #relationship:B# 9-18.However, in this case the facilitator agent is responsible for maintaining a list of services (or resources) that other agents in the system can offer (or control). #relationship:D# 9-19.With the support of a nameserver agent, which maintains the names and locations of each agent (IP addresses), a facilitator allows other agents to dynamically enter/ leave the system and register/deregister their locations and capabilities.

10.When developing a multi-agent system it is essential to use standardized agent models to allow agents to easily cooperate, irrespective of their different capabilities and functions, or the platforms used to develop them. For these reasons in the MAS community there is a significant body of work focusing on the formalization of: (a) agent specification languages, which are standards for defining messages types and agent interaction models. Today FIPA-ACL is used by MAS developers as the de facto standard for message exchange and interaction protocols; (b) ontologies, which define a common ‘‘vocabulary’’ of terms and concepts that agents are able to exchange and interpret. Currently, the trend in the community of MAS developers is to implement application-specific ontologies. However, interoperability between multiagent systems using different ontologies is difficult to obtain, even if they run on the same platform or they are based on similar concepts. A solution to this problem is to employ a two-layer model for ontology specification. Specifically, the ontology in the top level, called ‘‘upper’’ ontology in, is responsible for defining the basic concepts that are in common to most smart grid applications (substation, switch, voltage, ), and it is used as a template for defining more specific ontologies for different applications. It is also useful to note that existing object-oriented standards for information exchange in power engineering applications, such as CIM and IEC 61850, can be easily used as reference models when developing an upper ontology for smart grid applications. Implementation platforms In recent years several tools and programming frameworks have been provided to develop multi-agent systems in the context of smart grid applications, and interested readers can refer to for a complete survey. However, the open-source Java Agent Development Framework (JADE) is probably the most common platform for developing MAS solutions for smart grid applications. Most of existing MAS implementations are prototypes used for labbased experiments, which aim at demonstrating the feasibility of the MAS approach. Recently some multi-agent systems have been tested into operational electric grids. For instance, a multi-agent system, called Protection Engineering Diagnostic Agents (PEDA), has been used by a transmission system operator in the UK to interpret SCADA-related data and to provide online diagnostic information and alarms. In a multiagent system is implemented using JADE to integrate a group of electric vehicles into the electric grid and to support both demand response and V2G services. However, to demonstrate that MAS technologies meet the robustness and reliability requirements of typical power grid applications, large scale testing is still needed.A valuable option to avoid the costs and risks associated to test new technologies in real power grids is to employ realistic simulation tools that simultaneously model electric power scenarios and the behaviors of computer communication protocols. An example is provided by EPOCHS, which is a combined simulation environment that federates commercial electric simulators with ns-2, a popular open-source communication-network simulator. Before concluding this section it is necessary to observe that alternative technologies have also been considered for building large-scale and interoperable power system applications, including service-oriented architectures (SOA), grid and cloud computing and web services. However, agent-based technologies appear the most suitable solution for distributed control applications that must support autonomous behaviors, as also demonstrated by the wide range of applications in which multiagent systems are being developed.Interested readers are also referred to for a more detailed discussion about the technical challenges that should be addressed to apply in the smart grid domain the other approaches mentioned above to build largescale interoperable dynamic systems.

10-1.When developing a multi-agent system it is essential to use standardized agent models to allow agents to easily cooperate, irrespective of their different capabilities and functions, or the platforms used to develop them. #relationship:A# 10-2.For these reasons in the MAS community there is a significant body of work focusing on the formalization of: (a) agent specification languages, which are standards for defining messages types and agent interaction models. #relationship:0# 10-3.Today FIPA-ACL is used by MAS developers as the de facto standard for message exchange and interaction protocols; (b) ontologies, which define a common ‘‘vocabulary’’ of terms and concepts that agents are able to exchange and interpret. 
10-4.Currently, the trend in the community of MAS developers is to implement application-specific ontologies. #relationship:B# 10-5.However, interoperability between multiagent systems using different ontologies is difficult to obtain, even if they run on the same platform or they are based on similar concepts.
10-6.A solution to this problem is to employ a two-layer model for ontology specification. #relationship:D# 10-7.Specifically, the ontology in the top level, called ‘‘upper’’ ontology in, is responsible for defining the basic concepts that are in common to most smart grid applications (substation, switch, voltage, ), and it is used as a template for defining more specific ontologies for different applications. #relationship:D# 10-8.It is also useful to note that existing object-oriented standards for information exchange in power engineering applications, such as CIM and IEC 61850, can be easily used as reference models when developing an upper ontology for smart grid applications. 
10-9.Implementation platforms In recent years several tools and programming frameworks have been provided to develop multi-agent systems in the context of smart grid applications, and interested readers can refer to for a complete survey. #relationship:B# 10-10.However, the open-source Java Agent Development Framework (JADE) is probably the most common platform for developing MAS solutions for smart grid applications. 
10-11.Most of existing MAS implementations are prototypes used for labbased experiments, which aim at demonstrating the feasibility of the MAS approach. #relationship:0# 10-12.Recently some multi-agent systems have been tested into operational electric grids. #relationship:C# 10-13.For instance, a multi-agent system, called Protection Engineering Diagnostic Agents (PEDA), has been used by a transmission system operator in the UK to interpret SCADA-related data and to provide online diagnostic information and alarms. 
10-14.In a multiagent system is implemented using JADE to integrate a group of electric vehicles into the electric grid and to support both demand response and V2G services. #relationship:B# 10-15.However, to demonstrate that MAS technologies meet the robustness and reliability requirements of typical power grid applications, large scale testing is still needed.
10-16.A valuable option to avoid the costs and risks associated to test new technologies in real power grids is to employ realistic simulation tools that simultaneously model electric power scenarios and the behaviors of computer communication protocols. #relationship:C# 10-17.An example is provided by EPOCHS, which is a combined simulation environment that federates commercial electric simulators with ns-2, a popular open-source communication-network simulator. 
10-18.Before concluding this section it is necessary to observe that alternative technologies have also been considered for building large-scale and interoperable power system applications, including service-oriented architectures (SOA), grid and cloud computing and web services. #relationship:B# 10-19.However, agent-based technologies appear the most suitable solution for distributed control applications that must support autonomous behaviors, as also demonstrated by the wide range of applications in which multiagent systems are being developed.
10-20.Interested readers are also referred to for a more detailed discussion about the technical challenges that should be addressed to apply in the smart grid domain the other approaches mentioned above to build largescale interoperable dynamic systems.

11.Electric utilities consider security, protection and reliability of the electric infrastructures one of their key priorities because failures or malfunctions in power systems not only would have an economical impact, but could also cause serious damages to people. Historically security in power systems was obtained by ensuring physical protection of power generators and distribution grids, as well as physical isolation of utility control centers. Furthermore, closed and dedicated communication networks running proprietary protocols were typically used in SCADA-based power control systems. On the other hand, it is reasonable to expect that in smart grids the deployment of distributed and autonomous control functions, as well as the adoption of open network architectures, will bring new security vulnerabilities to smart grids and they will allow a variety of unforeseen security attacks. Different categories of security attacks specific to the smart grid domain have been discussed and identified in previous survey papers. Based on those studies, the most important vulnerabilities of the smart grid communication system can be broadly classified as follows. Device vulnerabilities: IEDs will be widely deployed in smart grids to monitor and remotely control electricity production and distribution processes. However, malicious users or attackers can compromise these devices,  to manipulate sensed data or to disrupt normal grid operations. Furthermore, many IEDs will support wireless communications to facilitate deployment and simplify the access to information. An intuitive downside of wireless communication technologies is that they rely on an inherently unprotected physical medium. This makes easier to capture private information (eavesdropping), disrupt communications with noise signals (jamming attack), or generate fake messages (injecting attack). Solutions of these attacks include encryption of messages for data integrity and confidentiality, authentication of network access, and various randomized transmission methods, such as spread spectrum techniques. Network vulnerabilities: The adoption of open network architectures, off-the-shelf network devices and publicly available communication standards is needed to meet the flexibility, scalability and interoperability requirements discussed in Section  However, this also causes various security problems observed in other telecommunications networks adopting open architectures (Internet), such as malicious modification of routing information, DNS hacking, and various types of denial of service (DoS) attacks. More specifically, in a typical DoS attack an attacker can control a set of nodes to overwhelm other nodes with data traffic, resulting in excessive network delays or even communication failures. For instance, compromised smart meters can be forced to flood an EMS with meaningless messages. In this way an EMS would consume all its computational and communication resources and it would not be able to timely react to legitimate requests. To prevent these network attacks, access control and intrusion detection are essential security mechanisms. Similarly, authentication and authorization schemes are also necessary to support secure remote configuration and control of geographically dispersed devices. Data vulnerabilities: Data manipulation is an important security issue because an attacker can modify data or control commands to compromise electric grid reliability. However, smart grids will also be increasingly vulnerable to data attacks designed to compromise the privacy of customers. For instance, the man-in-the-middle attack is a popular method used by malicious users to gain access to information without physically compromising the target.If an attacker is able to snoop the metering data transmitted from the consumer’s home it could infer consumer’s habits and activities. For instance, it would be possible to learn whether a home is occupied or not by detecting power consumption signatures of specific activities (watching television or using the microwave). As better explained in following sections, encryption, message authentication and intrusion detection schemes are needed to preserve data integrity and confidentiality in smart grids. Finally, it is important to point out that security techniques developed for other telecommunications networks can fail to meet the security requirements of smart grid communication systems because: (i) Many security attacks envisioned for smart grid communication systems do not have a counterpart in other computer networks because they can target either the physical power system or the communication infrastructure or both. For instance, in the power system there are several control loops used to control physical aspects of generation, transmission, and distribution processes, and an attack directed at the communication networks underlying these control loops can have a system-wide impact on power system stability. (ii) Typical security objectives and priorities for smart grids are different from those of most telecommunications networks.Indeed, in most networks data confidentiality and integrity are more important than communication availability. On the contrary, in a power system electricity must always be available. Thus, availability is the most important security objective along with the protection of consumers’ privacy.(iii) Most devices that are used in smart grids are expected to be heavily constrained in terms of computation capabilities and data storage. Thus, security techniques developed for highcapability Internet-enabled devices (servers, laptops, or smartphones) are not suitable for smart grid devices. In the rest of this section we will present some fundamental security techniques that should be integrated in smart grids for improving the robustness of smart grids against various security attacks and privacy risks. Furthermore, we will also discuss a few representative solutions in each category to clarify interesting open problems. For the sake of clarity, in we provide a classification of major research trends in the area of security for smart grids, which we have also outlined in following sections.
11-1.Electric utilities consider security, protection and reliability of the electric infrastructures one of their key priorities because failures or malfunctions in power systems not only would have an economical impact, but could also cause serious damages to people. 
11-2.Historically security in power systems was obtained by ensuring physical protection of power generators and distribution grids, as well as physical isolation of utility control centers. #relationship:D# 11-3.Furthermore, closed and dedicated communication networks running proprietary protocols were typically used in SCADA-based power control systems. #relationship:D# 11-4.On the other hand, it is reasonable to expect that in smart grids the deployment of distributed and autonomous control functions, as well as the adoption of open network architectures, will bring new security vulnerabilities to smart grids and they will allow a variety of unforeseen security attacks. 
11-5.Different categories of security attacks specific to the smart grid domain have been discussed and identified in previous survey papers. 
11-6.Based on those studies, the most important vulnerabilities of the smart grid communication system can be broadly classified as follows. #relationship:0# 11-7.Device vulnerabilities: IEDs will be widely deployed in smart grids to monitor and remotely control electricity production and distribution processes. #relationship:B# 11-8.However, malicious users or attackers can compromise these devices,  to manipulate sensed data or to disrupt normal grid operations. #relationship:D# 11-9.Furthermore, many IEDs will support wireless communications to facilitate deployment and simplify the access to information. 
11-10.An intuitive downside of wireless communication technologies is that they rely on an inherently unprotected physical medium. #relationship:0# 11-11.This makes easier to capture private information (eavesdropping), disrupt communications with noise signals (jamming attack), or generate fake messages (injecting attack). #relationship:0# 11-12.Solutions of these attacks include encryption of messages for data integrity and confidentiality, authentication of network access, and various randomized transmission methods, such as spread spectrum techniques. 
11-13.Network vulnerabilities: The adoption of open network architectures, off-the-shelf network devices and publicly available communication standards is needed to meet the flexibility, scalability and interoperability requirements discussed in Section  However, this also causes various security problems observed in other telecommunications networks adopting open architectures (Internet), such as malicious modification of routing information, DNS hacking, and various types of denial of service (DoS) attacks. #relationship:D# 11-14.More specifically, in a typical DoS attack an attacker can control a set of nodes to overwhelm other nodes with data traffic, resulting in excessive network delays or even communication failures. #relationship:C# 11-15.For instance, compromised smart meters can be forced to flood an EMS with meaningless messages. #relationship:0# 11-16.In this way an EMS would consume all its computational and communication resources and it would not be able to timely react to legitimate requests. 
11-17.To prevent these network attacks, access control and intrusion detection are essential security mechanisms. Similarly, authentication and authorization schemes are also necessary to support secure remote configuration and control of geographically dispersed devices. 
11-18.Data vulnerabilities: Data manipulation is an important security issue because an attacker can modify data or control commands to compromise electric grid reliability. #relationship:B# 11-19.However, smart grids will also be increasingly vulnerable to data attacks designed to compromise the privacy of customers. #relationship:C# 11-20.For instance, the man-in-the-middle attack is a popular method used by malicious users to gain access to information without physically compromising the target.
11-21.If an attacker is able to snoop the metering data transmitted from the consumer’s home it could infer consumer’s habits and activities. #relationship:C# 11-22.For instance, it would be possible to learn whether a home is occupied or not by detecting power consumption signatures of specific activities (watching television or using the microwave). #relationship:C# 11-23.As better explained in following sections, encryption, message authentication and intrusion detection schemes are needed to preserve data integrity and confidentiality in smart grids.
11-24.Finally, it is important to point out that security techniques developed for other telecommunications networks can fail to meet the security requirements of smart grid communication systems because: (i) Many security attacks envisioned for smart grid communication systems do not have a counterpart in other computer networks because they can target either the physical power system or the communication infrastructure or both. #relationship:C# 11-25.For instance, in the power system there are several control loops used to control physical aspects of generation, transmission, and distribution processes, and an attack directed at the communication networks underlying these control loops can have a system-wide impact on power system stability. #relationship:0# 11-26.(ii) Typical security objectives and priorities for smart grids are different from those of most telecommunications networks. #relationship:0# 11-27.Indeed, in most networks data confidentiality and integrity are more important than communication availability. #relationship:B# 11-28.On the contrary, in a power system electricity must always be available. #relationship:A# 11-29.Thus, availability is the most important security objective along with the protection of consumers’ privacy. #relationship:0# 11-30.(iii) Most devices that are used in smart grids are expected to be heavily constrained in terms of computation capabilities and data storage. #relationship:A# 11-31.Thus, security techniques developed for highcapability Internet-enabled devices (servers, laptops, or smartphones) are not suitable for smart grid devices. 
11-32.In the rest of this section we will present some fundamental security techniques that should be integrated in smart grids for improving the robustness of smart grids against various security attacks and privacy risks. #relationship:D# 11-33.Furthermore, we will also discuss a few representative solutions in each category to clarify interesting open problems. 
11-34.For the sake of clarity, in we provide a classification of major research trends in the area of security for smart grids, which we have also outlined in following sections.

12.A public key infrastructure (PKI) is a fundamental security tool in most telecommunications networks and distributed systems in general. Recently the design of PKIs suitable for smart grids has been extensively studied. Basically, a PKI is a system of software and hardware components providing digital signatures, called certificates, which are used to identify a certain entity (a device, a program, an organization). These certificates are securely stored by a trusted certificate authority (CA), which also decides when and how to renew or revoke them. For instance, smart meters can register their serial numbers with a CA. Typically, a PKI employs public key cryptography techniques, which are based on the simultaneous creation of a pair of public and private keys, to securely store and exchange certificates. The public key is publicly available (as part of the digital certificates) in central repositories and it is used to encrypt messages, while the private key is known only to the recipient of the message and it is used for decryption. This is substantially different from symmetric key crypto-systems, where there is an initial exchange of a shared secret key, which would require to pre-establish a secure communication channel. Finally, PKI also supports message authentication because the sender can use its private key to encrypt a digital certificate, which is then utilized to sign transmitted messages. Although PKI is the most popular key management scheme in the Internet there are some issues to apply existing PKI solutions to the smart grid domain. First of all, there is a scalability problem because a PKI for smart grids should maintain certificates for millions of devices. Furthermore, differently from classical PKI systems, we cannot assume that identities are the only relevant properties that should be certified in smart grid devices. For instance, context information such as the installation location of the devices could also be included in the certificate. However, this information is known only after the installation and it may change dynamically. Hence, digital certificates associated to smart grid devices should also be dynamic. Finally, smart grids must support real-time and reliable operations. Therefore, PKI technologies should meet strict delay constraints and provide fault tolerance to ensure high availability. However, a PKI involves centralized authorities and complex certification policies and it might be quite challenging to satisfy latency requirements. To address the above issues a number of research directions are currently being investigated. For instance, it is generally agreed that more automated configuration tools are needed for PKI systems in smart grids. These tools will be used to allow each organization to set its own security policies (how private keys are protected, which is the validity time of a certificate, how certificates are revoked, ) and to easily adapt these policies to the different requirements of smart grid devices and applications. A large body of work is also dedicated to the design of PKI architectures that are able to meet the reliability, scalability and delay requirements of smart grids. For instance, a novel key management scheme is proposed in, which combines public-key and symmetric key approaches to achieve simplicity and to improve scalability. Basically, trust anchors are deployed in the PKI system, which employ robust public key methods to establish symmetric keys between data aggregators and data collectors. Then, trust delegation mechanisms are used to allow simple sensors nodes to access the grid and to communicate with data agents. However, the key distribution scheme proposed in can suffer from the man-in-the-middle attack during the initial authentication phase. To solve this issue, in it is proposed to use trusted third parties to distribute shared keys among the components of the smart grid. The focus of the work in is the scalability and interoperability of the key management system. In particular, the key management scheme proposed in uses existing standard protocols for network access authentication to avoid that multiple authentication and key establishment processes are performed across different protocols and link-layer technologies. A simple PKI system is designed in, which assumes that a unique machine number is available at each device, which can be used by a central server holding a master key to generate unique private keys. The main advantage of this scheme is that it does not require to separately configure each device. On the other hand, unique machine identifiers are not always available. Finally, a public key crypto-system is proposed in, which exploits homomorphic encryption techniques to avoid that a pair of public and private keys is generated for each communication link between customers and utility control centers.In general, an aspect that needs much further investigation is the design of enhancements to existing PKI systems to support new use cases, in particular those due to the increasing adoption of mobile electric vehicles.
12-1.A public key infrastructure (PKI) is a fundamental security tool in most telecommunications networks and distributed systems in general. 
12-2.Recently the design of PKIs suitable for smart grids has been extensively studied. 
12-3.Basically, a PKI is a system of software and hardware components providing digital signatures, called certificates, which are used to identify a certain entity (a device, a program, an organization). #relationship:0# 12-4.These certificates are securely stored by a trusted certificate authority (CA), which also decides when and how to renew or revoke them. #relationship:C# 12-5.For instance, smart meters can register their serial numbers with a CA. #relationship:D# 12-6.Typically, a PKI employs public key cryptography techniques, which are based on the simultaneous creation of a pair of public and private keys, to securely store and exchange certificates. 
12-7.The public key is publicly available (as part of the digital certificates) in central repositories and it is used to encrypt messages, while the private key is known only to the recipient of the message and it is used for decryption. 
12-8.This is substantially different from symmetric key crypto-systems, where there is an initial exchange of a shared secret key, which would require to pre-establish a secure communication channel. #relationship:D# 12-9.Finally, PKI also supports message authentication because the sender can use its private key to encrypt a digital certificate, which is then utilized to sign transmitted messages. #relationship:B# 12-10.Although PKI is the most popular key management scheme in the Internet there are some issues to apply existing PKI solutions to the smart grid domain. 
12-11.First of all, there is a scalability problem because a PKI for smart grids should maintain certificates for millions of devices. #relationship:D# 12-12.Furthermore, differently from classical PKI systems, we cannot assume that identities are the only relevant properties that should be certified in smart grid devices. #relationship:C# 12-13.For instance, context information such as the installation location of the devices could also be included in the certificate. #relationship:C# 12-14.However, this information is known only after the installation and it may change dynamically. #relationship:A# 12-15.Hence, digital certificates associated to smart grid devices should also be dynamic. 
12-16.Finally, smart grids must support real-time and reliable operations. #relationship:A# 12-17.Therefore, PKI technologies should meet strict delay constraints and provide fault tolerance to ensure high availability. #relationship:B# 12-18.However, a PKI involves centralized authorities and complex certification policies and it might be quite challenging to satisfy latency requirements. 
12-19.To address the above issues a number of research directions are currently being investigated. #relationship:C# 12-20.For instance, it is generally agreed that more automated configuration tools are needed for PKI systems in smart grids. #relationship:0# 12-21.These tools will be used to allow each organization to set its own security policies (how private keys are protected, which is the validity time of a certificate, how certificates are revoked, ) and to easily adapt these policies to the different requirements of smart grid devices and applications. 
12-22.A large body of work is also dedicated to the design of PKI architectures that are able to meet the reliability, scalability and delay requirements of smart grids. #relationship:C# 12-23.For instance, a novel key management scheme is proposed in, which combines public-key and symmetric key approaches to achieve simplicity and to improve scalability. 
12-24.Basically, trust anchors are deployed in the PKI system, which employ robust public key methods to establish symmetric keys between data aggregators and data collectors. #relationship:D# 12-25.Then, trust delegation mechanisms are used to allow simple sensors nodes to access the grid and to communicate with data agents. #relationship:B# 12-26.However, the key distribution scheme proposed in can suffer from the man-in-the-middle attack during the initial authentication phase. #relationship:0# 12-27.To solve this issue, in it is proposed to use trusted third parties to distribute shared keys among the components of the smart grid. #relationship:0# 12-28.The focus of the work in is the scalability and interoperability of the key management system. #relationship:D# 12-29.In particular, the key management scheme proposed in uses existing standard protocols for network access authentication to avoid that multiple authentication and key establishment processes are performed across different protocols and link-layer technologies. 
12-30.A simple PKI system is designed in, which assumes that a unique machine number is available at each device, which can be used by a central server holding a master key to generate unique private keys. 
12-31.The main advantage of this scheme is that it does not require to separately configure each device. #relationship:C# 12-32.On the other hand, unique machine identifiers are not always available. #relationship:D# 12-33.Finally, a public key crypto-system is proposed in, which exploits homomorphic encryption techniques to avoid that a pair of public and private keys is generated for each communication link between customers and utility control centers.
12-34.In general, an aspect that needs much further investigation is the design of enhancements to existing PKI systems to support new use cases, in particular those due to the increasing adoption of mobile electric vehicles.

13.An essential security mechanism is the authentication method, which is used to verify device identities and data validity. As observed above PKI systems inherently provide device authentication through digital signatures. The authenticated device identity can be exploited to establish shared secret keys that are used for encrypting and authenticating data packets.It is important to note that symmetric key cryptography is generally preferred to public key cryptography for data authentication because it uses the same key for both decryption and encryption, and this results in faster cryptographic algorithms that requires less processing power. However, authentication schemes suitable for smart grids should take into account the limited resources (low memory and computational capacity) of most smart grid devices, as well as the stringent delay requirements of smart grid applications. A lightweight message authentication scheme is proposed in, which aims at minimizing the number of messages exchanged during authentication. This is achieved by combining the Diffie-Hellman protocol for key establishment and an hash-based message authentication code (MAC) technique. An authentication protocol is proposed in for multicast communications, which reduces storage and bandwidth overhead with respect to other schemes that use public-key signature over multiple messages. An alternative authentication approach is proposed in, which ensures both authentication and data integrity by jointly using digital signatures and timestamps. Finally, three authentication mechanisms are specified in for devices typically used in HANs, such as smart meters, smart household appliances, and electric vehicles moving. Note that EVs pose the most complex authentication problems because they can move between different home area networks. A data protection mechanism that it is closely related to device authentication is access control, which aims at ensuring that access to objects (any entity containing information or providing services) is permitted only to authorized users. The most common access control schemes in telecommunications networks are based on access control lists (ACLs), which specify the identities of users allowed to access shared objects and what privileges they have. However, ACL-based approaches may not scale with the huge number of customers and resources involved in smart grid services. Therefore, most of the research in this area is focusing on the formulation of role-based access control methods, in which permissions to perform certain operations are assigned to specific roles rather than user identities. A network access control model for power system with microgrids is described in, in which each micro-grid is a separate network domain with an independent control center that maintains XML-based security policies and roles. In this scheme a role is defined as a collection of privileges that can be executed by authorized users in local and remote domains. Note that each user can be assigned with multiple roles. Furthermore, to improve scalability roles are structured into a hierarchy in which the ‘‘parent’’ role directly inherits all the privileges of its ‘‘children’’ roles. In it is proposed to store data in an encrypted form that depends on the data attributes. Then, only users having the same attributes as the data can decrypt those messages. Finally, an alternative scheme is proposed in to use smart meters as firewalls between home area networks and the utility core backbone.
13-1.An essential security mechanism is the authentication method, which is used to verify device identities and data validity. #relationship:D# 13-2.As observed above PKI systems inherently provide device authentication through digital signatures. #relationship:D# 13-3.The authenticated device identity can be exploited to establish shared secret keys that are used for encrypting and authenticating data packets.
13-4.It is important to note that symmetric key cryptography is generally preferred to public key cryptography for data authentication because it uses the same key for both decryption and encryption, and this results in faster cryptographic algorithms that requires less processing power. #relationship:B# 13-5.However, authentication schemes suitable for smart grids should take into account the limited resources (low memory and computational capacity) of most smart grid devices, as well as the stringent delay requirements of smart grid applications. 
13-6.A lightweight message authentication scheme is proposed in, which aims at minimizing the number of messages exchanged during authentication. #relationship:D# 13-7.This is achieved by combining the Diffie-Hellman protocol for key establishment and an hash-based message authentication code (MAC) technique. 
13-8.An authentication protocol is proposed in for multicast communications, which reduces storage and bandwidth overhead with respect to other schemes that use public-key signature over multiple messages. 
13-9.An alternative authentication approach is proposed in, which ensures both authentication and data integrity by jointly using digital signatures and timestamps. #relationship:D# 13-10.Finally, three authentication mechanisms are specified in for devices typically used in HANs, such as smart meters, smart household appliances, and electric vehicles moving. #relationship:D# 13-11.Note that EVs pose the most complex authentication problems because they can move between different home area networks. 
13-12.A data protection mechanism that it is closely related to device authentication is access control, which aims at ensuring that access to objects (any entity containing information or providing services) is permitted only to authorized users. #relationship:D# 13-13.The most common access control schemes in telecommunications networks are based on access control lists (ACLs), which specify the identities of users allowed to access shared objects and what privileges they have. #relationship:B# 13-14.However, ACL-based approaches may not scale with the huge number of customers and resources involved in smart grid services. #relationship:A# 13-15.Therefore, most of the research in this area is focusing on the formulation of role-based access control methods, in which permissions to perform certain operations are assigned to specific roles rather than user identities. 
13-16.A network access control model for power system with microgrids is described in, in which each micro-grid is a separate network domain with an independent control center that maintains XML-based security policies and roles. #relationship:0# 13-17.In this scheme a role is defined as a collection of privileges that can be executed by authorized users in local and remote domains. #relationship:D# 13-18.Note that each user can be assigned with multiple roles. #relationship:D# 13-19.Furthermore, to improve scalability roles are structured into a hierarchy in which the ‘‘parent’’ role directly inherits all the privileges of its ‘‘children’’ roles. #relationship:0# 13-20.In it is proposed to store data in an encrypted form that depends on the data attributes. #relationship:D# 13-21.Then, only users having the same attributes as the data can decrypt those messages. #relationship:D# 13-22.Finally, an alternative scheme is proposed in to use smart meters as firewalls between home area networks and the utility core backbone.

14.The most intuitive method to ensure data privacy is to use a cryptographic protocol, which preserves data confidentiality by encrypting data messages between data originators (smart meters) and utility providers. The device authentication schemes described in the previous section can be used to create the shared secret keys that are needed for message encryption. However, the massive deployment of smart meters and smart appliances also raises new privacy concerns. Specifically, it becomes an important issue to avoid that malicious users can learn information about customers’ behaviors and habits. For these reasons several privacy protection methods specific for smart metering have been recently proposed. These solutions can be categorized into two separated classes: anonymization techniques and randomization techniques, Anonymization techniques achieve privacy protection for metering data by anonymizing energy usage measurements in order to make more difficult to associate metering information to a particular smart meter or customer.In this is achieved by assuming that a trusted third party provides pseudonymous identities, which are then used to anonymize high-frequency metering data. Note that this metering data is the most critical to infer usage patterns of specific electrical appliances, while low-frequency metering readings used for billing purposes are rarely enough to offer adequate privacy. The use of a trusted third party is also proposed in, although this approach introduces additional complexities and requirements to the security framework. More efficient schemes can be designed by exploiting secure data aggregation techniques. For instance a privacy-preserving aggregation scheme, called EPPA, is designed in, which permits to perform data aggregation at intermediate proxies without decrypting the data received by individual smart meters. A new encryption mechanism is also proposed in, which allows a group of smart meters to encrypt their data in such a way that electric utilities can reconstruct aggregated energy usage information without decrypting them. Note that the main open issue in this class of privacy protection schemes is how to preserve the ability of electric utilities to know the instantaneous electricity consumption, which is needed to support demand response and direct load control. Randomization techniques are used in particular to protect the confidentiality of usage patterns of household electric appliances. More specifically, this class of schemes achieve privacy protection by manipulating the metering data with some stochastic perturbation function so that it is difficult to infer patterns of energy consumption. For instance, a simple privacy scheme is developed in, which adds random Gaussian noises to each smart meter. This approach is simple but not very robust because it applies randomization on true readings and statistical methods could be used to extract load profiles. More sophisticated schemes are developed in, which mix actual smart meter readings with faked readings sampled from arbitrary distributions. However, further studies are needed to understand which is the level of uncertainty that is added by such randomization methods, and whether useful information about energy consumption can be maintained in the modified data. Finally, an alternative approach is proposed in by assuming that smart homes will contain a variety of energy storage and generation systems, which can be used to obfuscate appliance load signatures by randomly mixing utility electricity with electricity from local generators.
14-1.The most intuitive method to ensure data privacy is to use a cryptographic protocol, which preserves data confidentiality by encrypting data messages between data originators (smart meters) and utility providers. 
14-2.The device authentication schemes described in the previous section can be used to create the shared secret keys that are needed for message encryption. #relationship:B# 14-3.However, the massive deployment of smart meters and smart appliances also raises new privacy concerns. #relationship:D# 14-4.Specifically, it becomes an important issue to avoid that malicious users can learn information about customers’ behaviors and habits. #relationship:0# 14-5.For these reasons several privacy protection methods specific for smart metering have been recently proposed. 
14-6.These solutions can be categorized into two separated classes: anonymization techniques and randomization techniques, Anonymization techniques achieve privacy protection for metering data by anonymizing energy usage measurements in order to make more difficult to associate metering information to a particular smart meter or customer. #relationship:0# 14-7.In this is achieved by assuming that a trusted third party provides pseudonymous identities, which are then used to anonymize high-frequency metering data. #relationship:D# 14-8.Note that this metering data is the most critical to infer usage patterns of specific electrical appliances, while low-frequency metering readings used for billing purposes are rarely enough to offer adequate privacy. 
14-9.The use of a trusted third party is also proposed in, although this approach introduces additional complexities and requirements to the security framework. #relationship:0# 14-10.More efficient schemes can be designed by exploiting secure data aggregation techniques. #relationship:C# 14-11.For instance a privacy-preserving aggregation scheme, called EPPA, is designed in, which permits to perform data aggregation at intermediate proxies without decrypting the data received by individual smart meters. 
14-12.A new encryption mechanism is also proposed in, which allows a group of smart meters to encrypt their data in such a way that electric utilities can reconstruct aggregated energy usage information without decrypting them. #relationship:D# 14-13.Note that the main open issue in this class of privacy protection schemes is how to preserve the ability of electric utilities to know the instantaneous electricity consumption, which is needed to support demand response and direct load control. 
14-14.Randomization techniques are used in particular to protect the confidentiality of usage patterns of household electric appliances. #relationship:D# 14-15.More specifically, this class of schemes achieve privacy protection by manipulating the metering data with some stochastic perturbation function so that it is difficult to infer patterns of energy consumption. #relationship:C# 14-16.For instance, a simple privacy scheme is developed in, which adds random Gaussian noises to each smart meter. #relationship:C# 14-17.This approach is simple but not very robust because it applies randomization on true readings and statistical methods could be used to extract load profiles. 
14-18.More sophisticated schemes are developed in, which mix actual smart meter readings with faked readings sampled from arbitrary distributions. #relationship:C# 14-19.However, further studies are needed to understand which is the level of uncertainty that is added by such randomization methods, and whether useful information about energy consumption can be maintained in the modified data. #relationship:D# 14-20.Finally, an alternative approach is proposed in by assuming that smart homes will contain a variety of energy storage and generation systems, which can be used to obfuscate appliance load signatures by randomly mixing utility electricity with electricity from local generators.

15.Although several security mechanisms can be used to deal with security attacks, more sophisticated attackers can exploit unknown system vulnerabilities and succeed in compromising network components.In this case an intrusion detection system (IDS) is essential to identify the attack and trigger appropriate countermeasures. There are different approaches that can be applied to design intrusion detection techniques, but at least three major methodologies can be identified: Anomaly detection: anomaly detection recognizes intrusive actions by looking for deviations from normal behaviors of protocols, programs or processes. This approach requires the specification of accurate statistical models of normal profiles, which can be quite difficult and costly to obtain. The main advantage of anomaly detection is its ability to detect unknown attacks. However, anomaly detection techniques also produce a high number of false alarms if the model is not sufficiently accurate. Furthermore, this approach is suitable for relatively stable systems, otherwise new models of normal operations should be developed after any configuration change. Signature detection: signature detection is complementary to anomaly detection because it uses deterministic patterns of known attacks to characterize malicious behaviors. The main advantage of signature-based methods is that they provide high accuracy and a low number of false alarms. However, there are also some drawbacks such as the inability of these schemes to detect novel attacks, whose signatures are unknown. Furthermore, pattern matching techniques and classification algorithms typically used in signature detection methods can be quite costly in terms of computing and data storage. Specification-based approach: specification-based methods detect attacks by defining ordered sequence of events, called policies, which corresponds to correct protocol behaviors. A violation to this set of constraints and rules is considered a security violation. A specification-based IDS is able to detect unknown attacks as for anomaly detection. However, an obvious downside of this class of techniques is that the development of specifications is time consuming and protocol specific. Another issue is that specifications are difficult to verify on devices that have limited memory and computational power.In the following we outline most representative solutions for intrusion detection in the smart grid domain based on the above categories. A key design problem for both anomaly and signature detection methods is to collect empirical data from smart grids and to extract accurate models for normal and malicious behaviors, respectively. Note that many intrusion detection schemes use neural networks to learn normal profiles and detect deviations from these profiles. However, those techniques do not seem suitable for smart grids because they are quite demanding in terms of computational and memory overheads. Furthermore, they do not guarantee deterministic response times. A variety of techniques have been proposed to address those issues. For instance, in supervised learning models known as support vector machines (SVM) are used to extract features (connection duration and protocol type) and recognize patterns representing normal communications because of their high accuracy and scalability.In it is shown that Decision Tree techniques can outperform other supervised machine learning techniques to implement real-time intrusion detection. A novel unsupervised network intrusion detection system based on clustering techniques is decribed in. Alternatively, if service level agreements (SLAs) are established between the service provider and its customers then SLA monitoring can be used to detect service violations and to verify intrusion attempts.In addition, defines a hierarchical IDS solution, in which an IDS module is installed at each protocol layer. Then, individual IDS modules are trained using data that are relevant to their level, but they also cooperate to detect possible attacks.In malicious events are modeled as random variables following a Gaussian process. For instance, a random variable may be used to represent the number of malfunctioning smart meters in a building, or the number of failed authentication attempts in a given time interval. Then, conventional stochastic tools are used to predict the occurrence of an attack. Distributed and low-complexity pattern recognition algorithms are also developed in. Finally, many anomaly detection algorithms utilize a sensitivity threshold to detect violations of normal behaviors, and the proper selection of this threshold is essential to reduce the occurrence of false alarms.In fuzzy-logic rules are developed for tuning this sensitivity threshold based on an estimate of the system knowledge obtained by the IDS module. However, an intelligent adversary could compromise the IDS and adapt its actions to reduce the probability to be detected. How to dynamically adjust the sensitivity threshold in response to more intelligent attacks is still an open issue. An important challenge for both anomaly-based and signaturebased IDSs is to identify which are the relevant events to monitor in the power system, and many studies exist that try to classify different types of attacks. Since a specification-based IDS do not require empirical data to detect intrusions, this class of intrusion detection schemes has been considered as a valid alternative to more sophisticated IDS solutions, at least in the early stage of smart grid development. For instance, in a specificationbased intrusion detection method is designed for the C12 standard protocol, which specifies an application-level messaging protocol to exchange power data over a network.In a specification- based IDS is developed of the IEEE 80 standard applied in home area networks. However, there is still a high overhead associated to these schemes, and it might be impractical to run them on smart grid devices.
15-1.Although several security mechanisms can be used to deal with security attacks, more sophisticated attackers can exploit unknown system vulnerabilities and succeed in compromising network components. #relationship:D# 15-2.In this case an intrusion detection system (IDS) is essential to identify the attack and trigger appropriate countermeasures. 
15-3.There are different approaches that can be applied to design intrusion detection techniques, but at least three major methodologies can be identified: Anomaly detection: anomaly detection recognizes intrusive actions by looking for deviations from normal behaviors of protocols, programs or processes. #relationship:0# 15-4.This approach requires the specification of accurate statistical models of normal profiles, which can be quite difficult and costly to obtain. 
15-5.The main advantage of anomaly detection is its ability to detect unknown attacks. #relationship:B# 15-6.However, anomaly detection techniques also produce a high number of false alarms if the model is not sufficiently accurate. #relationship:D# 15-7.Furthermore, this approach is suitable for relatively stable systems, otherwise new models of normal operations should be developed after any configuration change. 
15-8.Signature detection: signature detection is complementary to anomaly detection because it uses deterministic patterns of known attacks to characterize malicious behaviors. #relationship:D# 15-9.The main advantage of signature-based methods is that they provide high accuracy and a low number of false alarms. #relationship:B# 15-10.However, there are also some drawbacks such as the inability of these schemes to detect novel attacks, whose signatures are unknown. #relationship:D# 15-11.Furthermore, pattern matching techniques and classification algorithms typically used in signature detection methods can be quite costly in terms of computing and data storage. 
15-12.Specification-based approach: specification-based methods detect attacks by defining ordered sequence of events, called policies, which corresponds to correct protocol behaviors. #relationship:0# 15-13.A violation to this set of constraints and rules is considered a security violation. #relationship:D# 15-14.A specification-based IDS is able to detect unknown attacks as for anomaly detection. #relationship:B# 15-15.However, an obvious downside of this class of techniques is that the development of specifications is time consuming and protocol specific. #relationship:D# 15-16.Another issue is that specifications are difficult to verify on devices that have limited memory and computational power.
15-17.In the following we outline most representative solutions for intrusion detection in the smart grid domain based on the above categories. 
15-18.A key design problem for both anomaly and signature detection methods is to collect empirical data from smart grids and to extract accurate models for normal and malicious behaviors, respectively. #relationship:D# 15-19.Note that many intrusion detection schemes use neural networks to learn normal profiles and detect deviations from these profiles. #relationship:B# 15-20.However, those techniques do not seem suitable for smart grids because they are quite demanding in terms of computational and memory overheads. #relationship:D# 15-21.Furthermore, they do not guarantee deterministic response times. 
15-22.A variety of techniques have been proposed to address those issues. #relationship:C# 15-23.For instance, in supervised learning models known as support vector machines (SVM) are used to extract features (connection duration and protocol type) and recognize patterns representing normal communications because of their high accuracy and scalability. #relationship:0# 15-24.In it is shown that Decision Tree techniques can outperform other supervised machine learning techniques to implement real-time intrusion detection. 
15-25.A novel unsupervised network intrusion detection system based on clustering techniques is decribed in. #relationship:D# 15-26.Alternatively, if service level agreements (SLAs) are established between the service provider and its customers then SLA monitoring can be used to detect service violations and to verify intrusion attempts. #relationship:D# 15-27.In addition, defines a hierarchical IDS solution, in which an IDS module is installed at each protocol layer. #relationship:D# 15-28.Then, individual IDS modules are trained using data that are relevant to their level, but they also cooperate to detect possible attacks.
15-29.In malicious events are modeled as random variables following a Gaussian process. #relationship:C# 15-30.For instance, a random variable may be used to represent the number of malfunctioning smart meters in a building, or the number of failed authentication attempts in a given time interval. #relationship:D# 15-31.Then, conventional stochastic tools are used to predict the occurrence of an attack. #relationship:D# 15-32.Distributed and low-complexity pattern recognition algorithms are also developed in. #relationship:D# 15-33.Finally, many anomaly detection algorithms utilize a sensitivity threshold to detect violations of normal behaviors, and the proper selection of this threshold is essential to reduce the occurrence of false alarms.
15-34.In fuzzy-logic rules are developed for tuning this sensitivity threshold based on an estimate of the system knowledge obtained by the IDS module. #relationship:B# 15-35.However, an intelligent adversary could compromise the IDS and adapt its actions to reduce the probability to be detected. 
15-36.How to dynamically adjust the sensitivity threshold in response to more intelligent attacks is still an open issue. 
15-37.An important challenge for both anomaly-based and signaturebased IDSs is to identify which are the relevant events to monitor in the power system, and many studies exist that try to classify different types of attacks. 
15-38.Since a specification-based IDS do not require empirical data to detect intrusions, this class of intrusion detection schemes has been considered as a valid alternative to more sophisticated IDS solutions, at least in the early stage of smart grid development. #relationship:C# 15-39.For instance, in a specificationbased intrusion detection method is designed for the C12 standard protocol, which specifies an application-level messaging protocol to exchange power data over a network.
15-40.In a specification- based IDS is developed of the IEEE 80 standard applied in home area networks. #relationship:B# 15-41.However, there is still a high overhead associated to these schemes, and it might be impractical to run them on smart grid devices.

16. Utility companies need formal security analysis or simulation tools to quantify the robustness provided by adopted security mechanisms, as well as to predict the impact of attackers on smart grid operations and reliability. Obviously there are many tools to analyze vulnerabilities in traditional telecommunications networks (to identify misconfiguration problems), and to rate and score known vulnerabilities. However, new specific solutions are needed for smart grids due to the heterogeneity of devices, protocols and configurations. An automated tool for AMI configuration verification, called SmartAnalyzer, is developed in using formal analysis based on Satisfiability Modulo Theories (SMT). Basically, this tool encodes AMI configuration templates, which describe device configurations, network topologies, monitoring schedules, into SMT logic. Then, an SMT solver is used to verify this configurations against a set of high-level constraints (reachability between devices, schedule and resource constraints) and user-driven constraints (data protection, data integrity, transmission reliability). The output of this verification process is a report that indicates reasons of constraint violations and possible remedies. An alternative approach to quantify the degree of damages that cyber attacks can cause to a power systems is designed in. The key idea is that both physical components (electric grid elements) and cyber components (network devices and functionalities) can be modeled as objects to which state information is associated. Then, directed graphs are used to represent state dependencies amongst the various objects. Finally, a system of differential equations is utilized to specify the rules governing state evolution, and to model cause-effect relationships. However, identifying cause-effect relationships in largescale power systems is a challenging task. Another class of methods for risk analysis in smart grids rely on computational intelligence approaches. A useful technique in this class is fuzzy logic because it supports probabilistic risk assessment by measuring uncertainties in the decision making processes and allowing for incomplete or ambiguous data (fuzzy data).An overview of the main algorithms in computation intelligence used in smart grid risk assessment is reported in. A key open issue in the area of risk assessment is the design of toolkits that automatically generate models of the power system from specifications, operating procedures and network topologies to describe the vulnerabilities of devices, services and network connections. Note that power grid models are essential to identify system vulnerabilities, predict new attacks and evaluate potential service damages. Related to risk assessment (as well as intrusion detection) is the design of mechanisms to evaluate the trustworthiness of smart grid objects (devices, service providers, entire subsystems). Specifically, a trust system allows an entity to assess the reliability of another entity before deciding to interact with it (to use a service provided by that entity).In this way, a trust model can be used to determine risks and to give a weight to those risks. Typically, trust models are associated to reputation systems, which enable peers to rate each other after the completion of a certain task. Then, a reputation system uses the aggregated ratings about a given peer to derive its reputation score (or trustworthiness). As an example, power protection applications generally rely on the cooperation among grid components to cope with grid failures or grid instability. Thus, it will become very important to decide which is the best entity to collaborate with, and the reputation plays a key role in the decision process. For these reasons, various studies exist that have explored how to integrate reputation-based trust management systems in smart grids. For instance, in a trust management methodology is developed to verify if individual smart meters generate selfish and malicious reports on energy usage. Furthermore, one of the advantages of a trust system is to provide an additional layer of protection in power systems implementing agent-based control functions as discussed in. Specifically, those studies consider a backup protection scheme and propose trust metrics to improve the reliability of network communications. Similarly, in an early warning system is designed for predicting and anticipating cascading failures in power systems, which uses a reputation mechanism for controlling network behaviors. Furthermore, nodes in a network can be assigned different roles and perform different functions depending on their trust levels. Note that the design of suitable techniques for quantifying trust levels in dynamic environments while preserving data privacy is an open issue.  Summary and outlook on key research areas In this survey we have advocated the view of a smart grid as the outcome of an evolutionary transformation of the existing electricity network towards an optimized and sustainable energy system. We have analyzed the several factors that are contributing to this evolution, ranging from technological developments (the introduction of electric vehicles, the deployment of renewable energy resources, the recent advancements in energy storage systems, time-synchronized measurement technologies of electricity quality) to economical and societal drivers (liberalization of energy markets with the advent of prosumers, new environmental concerns about climate changes and pollution, soaring growth of energy demands, need for higher operating efficiency, active participation of consumers in demand response, better resiliency against both physical and cyber attacks). The incorporation in the smart grid of a pervasive monitoring and communication infrastructure is essential to: (a) measure the system state, (b) collect the sensor information and propagate control signals, and (c) allow distributed smart applications to control power flows in the network. Thus, the goal of this survey was to present a complete model of this monitoring and communication infrastructure, covering all layers of its architecture, ranging from communication technologies at the physical layer, to communication topologies and protocols at the network layer, and concluding with middleware services needed to support the new applications in a distributed fashion. We believe that this survey could provide the reader with a useful overview of the state-of-the-art solutions proposed at all layers of the smart grid communication infrastructure, as well as a guide of the open research issues. Hereafter, we aim at summarizing some of the novel research directions that are still worth exploring. Due to the massive number of data sets that will be collected in smart grids, classical databasemanagement tools can be unable to process them within acceptable delays.In addition to data analysis, other critical issues are data storage, search and visualization. Nowadays there are many application domains that are already witnessing an explosion of collected data, such as healthcare, retail markets, online social sites, but smart grids have the potential to become one of the most demanding one. However, since temporal and spatial variations of most electric processes are small, it is reasonable to expect that most measurements in this massive amount of data will be redundant. This creates many opportunities for the design of data mining techniques able to provide data compression. Furthermore, the design of novel knowledge-discovery methodologies that are specific for electric data is a very compelling research topic. Finally, cloud computing is considered an important data and computing model for data intensive smart grid applications. Energy routers indicate devices that allow units of energy (locally generated, stored, and forwarded) to be dispatched when and where it is needed. The deployment of energy routers within the smart grid can enable innovative paradigms for energy distribution and control, in which energy is logically packetized, buffered and forwarded over the physical energy network. While energy routers guarantee more flexible end efficient power distribution and this facilitates an increased use of renewable energy sources, they also pose new challenges. As an example, an energy router should be able to dynamically redirect incoming energy flows towards outgoing energy flows. Thus, new power electronics are required in energy routers to implement automatic energy control. Similarly, energy routers should implement distributed intelligence to control the energy routing process. Furthermore, innovative ways of dispatching energy in a smart grid can be devised taking advantage of EVs. For instance, we can use the batteries of EVs as a mean of physically moving electrical energy.In this way EVs can support a delaytolerant transfer of energy between homes. However, to quantify which are the potential gains of this approach a detailed cost-benefit analysis is necessary. The design of optimization strategies for the smart grid is a very active research area, and there is a rich set of methodologies and algorithms from different domains that have been considered for this purpose. For instance, there are several algorithms in the literature to determine the optimal load schedules of groups of domestic appliances However, how to design management and control schemes able to provide real-time and wide-area control with limited computational costs is still an open problem. We believe that flow-based congestion control algorithms, which have been commonly applied in large-scale information networks, such as the Internet, may be a promising and attractive approach to mitigate power congestion by reducing peak loads. For instance, there are electric devices that can elastically adapt the amount of instantaneous power they need, such as many common household appliances. Then, those devices could intelligently increase/decrease their power demands depending on congestion feedback signals from the utilities. Due to the intrinsic differences between conventional power grids and smart grids, existing electric power simulation/ analysis tools will not be able to accurately model and predict the behavior of new power grids. For instance, more precise models of renewable energy resources at increasingly lower time and spatial scales are needed to increase the reliability of protection and control systems. Similarly, the behaviors of power systems will be increasingly dependent on external factors, such as the reliability of the smart grid communication network. Thus, power simulators should integrate tools to model each component of a smart grid, as well as the possible interactions between components. Security mechanisms are an essential part of a smart grid. Although a considerable amount of research has been conducted in this field many open issues still exist because the increased interconnection and integration,  between electric grid, monitoring and communication network, data management systems and applications, also introduce new cyber-vulnerabilities into the smart grid. The most compelling research challenges are the design of suitable mechanisms to protect the confidentiality and integrity of metering data, as well as new mechanisms to control the access to smart-grid components and resources given that physical isolation of the power grid might not be feasible anymore.
16-1.Utility companies need formal security analysis or simulation tools to quantify the robustness provided by adopted security mechanisms, as well as to predict the impact of attackers on smart grid operations and reliability. 
16-2.Obviously there are many tools to analyze vulnerabilities in traditional telecommunications networks (to identify misconfiguration problems), and to rate and score known vulnerabilities. #relationship:B# 16-3.However, new specific solutions are needed for smart grids due to the heterogeneity of devices, protocols and configurations. 
16-4.An automated tool for AMI configuration verification, called SmartAnalyzer, is developed in using formal analysis based on Satisfiability Modulo Theories (SMT). 
16-5.Basically, this tool encodes AMI configuration templates, which describe device configurations, network topologies, monitoring schedules, into SMT logic. #relationship:D# 16-6.Then, an SMT solver is used to verify this configurations against a set of high-level constraints (reachability between devices, schedule and resource constraints) and user-driven constraints (data protection, data integrity, transmission reliability). #relationship:D# 16-7.The output of this verification process is a report that indicates reasons of constraint violations and possible remedies. 
16-8.An alternative approach to quantify the degree of damages that cyber attacks can cause to a power systems is designed in. #relationship:D# 16-9.The key idea is that both physical components (electric grid elements) and cyber components (network devices and functionalities) can be modeled as objects to which state information is associated. #relationship:D# 16-10.Then, directed graphs are used to represent state dependencies amongst the various objects. #relationship:D# 16-11.Finally, a system of differential equations is utilized to specify the rules governing state evolution, and to model cause-effect relationships. #relationship:B# 16-12.However, identifying cause-effect relationships in largescale power systems is a challenging task. 
16-13.Another class of methods for risk analysis in smart grids rely on computational intelligence approaches. 
16-14.A useful technique in this class is fuzzy logic because it supports probabilistic risk assessment by measuring uncertainties in the decision making processes and allowing for incomplete or ambiguous data (fuzzy data).
16-15.An overview of the main algorithms in computation intelligence used in smart grid risk assessment is reported in. 
16-16.A key open issue in the area of risk assessment is the design of toolkits that automatically generate models of the power system from specifications, operating procedures and network topologies to describe the vulnerabilities of devices, services and network connections. #relationship:D# 16-17.Note that power grid models are essential to identify system vulnerabilities, predict new attacks and evaluate potential service damages. 
16-18.Related to risk assessment (as well as intrusion detection) is the design of mechanisms to evaluate the trustworthiness of smart grid objects (devices, service providers, entire subsystems). #relationship:D# 16-19.Specifically, a trust system allows an entity to assess the reliability of another entity before deciding to interact with it (to use a service provided by that entity). #relationship:0# 16-20.In this way, a trust model can be used to determine risks and to give a weight to those risks. #relationship:D# 16-21.Typically, trust models are associated to reputation systems, which enable peers to rate each other after the completion of a certain task. #relationship:D# 16-22.Then, a reputation system uses the aggregated ratings about a given peer to derive its reputation score (or trustworthiness). #relationship:C# 16-23.As an example, power protection applications generally rely on the cooperation among grid components to cope with grid failures or grid instability. #relationship:A# 16-24.Thus, it will become very important to decide which is the best entity to collaborate with, and the reputation plays a key role in the decision process. #relationship:0# 16-25.For these reasons, various studies exist that have explored how to integrate reputation-based trust management systems in smart grids. #relationship:C# 16-26.For instance, in a trust management methodology is developed to verify if individual smart meters generate selfish and malicious reports on energy usage. #relationship:D# 16-27.Furthermore, one of the advantages of a trust system is to provide an additional layer of protection in power systems implementing agent-based control functions as discussed in. #relationship:D# 16-28.Specifically, those studies consider a backup protection scheme and propose trust metrics to improve the reliability of network communications. #relationship:0# 16-29.Similarly, in an early warning system is designed for predicting and anticipating cascading failures in power systems, which uses a reputation mechanism for controlling network behaviors. #relationship:D# 16-30.Furthermore, nodes in a network can be assigned different roles and perform different functions depending on their trust levels. #relationship:D# 16-31.Note that the design of suitable techniques for quantifying trust levels in dynamic environments while preserving data privacy is an open issue.  
16-32.Summary and outlook on key research areas In this survey we have advocated the view of a smart grid as the outcome of an evolutionary transformation of the existing electricity network towards an optimized and sustainable energy system. 
16-33.We have analyzed the several factors that are contributing to this evolution, ranging from technological developments (the introduction of electric vehicles, the deployment of renewable energy resources, the recent advancements in energy storage systems, time-synchronized measurement technologies of electricity quality) to economical and societal drivers (liberalization of energy markets with the advent of prosumers, new environmental concerns about climate changes and pollution, soaring growth of energy demands, need for higher operating efficiency, active participation of consumers in demand response, better resiliency against both physical and cyber attacks). 
16-34.The incorporation in the smart grid of a pervasive monitoring and communication infrastructure is essential to: (a) measure the system state, (b) collect the sensor information and propagate control signals, and (c) allow distributed smart applications to control power flows in the network. #relationship:A# 16-35.Thus, the goal of this survey was to present a complete model of this monitoring and communication infrastructure, covering all layers of its architecture, ranging from communication technologies at the physical layer, to communication topologies and protocols at the network layer, and concluding with middleware services needed to support the new applications in a distributed fashion. 
16-36.We believe that this survey could provide the reader with a useful overview of the state-of-the-art solutions proposed at all layers of the smart grid communication infrastructure, as well as a guide of the open research issues. #relationship:D# 16-37.Hereafter, we aim at summarizing some of the novel research directions that are still worth exploring. #relationship:A# 16-38.Due to the massive number of data sets that will be collected in smart grids, classical databasemanagement tools can be unable to process them within acceptable delays. #relationship:D# 16-39.In addition to data analysis, other critical issues are data storage, search and visualization. 
16-40.Nowadays there are many application domains that are already witnessing an explosion of collected data, such as healthcare, retail markets, online social sites, but smart grids have the potential to become one of the most demanding one. #relationship:B# 16-41.However, since temporal and spatial variations of most electric processes are small, it is reasonable to expect that most measurements in this massive amount of data will be redundant. #relationship:0# 16-42.This creates many opportunities for the design of data mining techniques able to provide data compression. #relationship:D# 16-43.Furthermore, the design of novel knowledge-discovery methodologies that are specific for electric data is a very compelling research topic. #relationship:D# 16-44.Finally, cloud computing is considered an important data and computing model for data intensive smart grid applications. 
16-45.Energy routers indicate devices that allow units of energy (locally generated, stored, and forwarded) to be dispatched when and where it is needed. 
16-46.The deployment of energy routers within the smart grid can enable innovative paradigms for energy distribution and control, in which energy is logically packetized, buffered and forwarded over the physical energy network. 
16-47.While energy routers guarantee more flexible end efficient power distribution and this facilitates an increased use of renewable energy sources, they also pose new challenges. #relationship:C# 16-48.As an example, an energy router should be able to dynamically redirect incoming energy flows towards outgoing energy flows. #relationship:A# 16-49.Thus, new power electronics are required in energy routers to implement automatic energy control. #relationship:0# 16-50.Similarly, energy routers should implement distributed intelligence to control the energy routing process. #relationship:D# 16-51.Furthermore, innovative ways of dispatching energy in a smart grid can be devised taking advantage of EVs. #relationship:C# 16-52.For instance, we can use the batteries of EVs as a mean of physically moving electrical energy. #relationship:0# 16-53.In this way EVs can support a delaytolerant transfer of energy between homes. #relationship:B# 16-54.However, to quantify which are the potential gains of this approach a detailed cost-benefit analysis is necessary. 
16-55.The design of optimization strategies for the smart grid is a very active research area, and there is a rich set of methodologies and algorithms from different domains that have been considered for this purpose. #relationship:C# 16-56.For instance, there are several algorithms in the literature to determine the optimal load schedules of groups of domestic appliances However, how to design management and control schemes able to provide real-time and wide-area control with limited computational costs is still an open problem. 
16-57.We believe that flow-based congestion control algorithms, which have been commonly applied in large-scale information networks, such as the Internet, may be a promising and attractive approach to mitigate power congestion by reducing peak loads. #relationship:C# 16-58.For instance, there are electric devices that can elastically adapt the amount of instantaneous power they need, such as many common household appliances. #relationship:D# 16-59.Then, those devices could intelligently increase/decrease their power demands depending on congestion feedback signals from the utilities. 
16-60.Due to the intrinsic differences between conventional power grids and smart grids, existing electric power simulation/ analysis tools will not be able to accurately model and predict the behavior of new power grids. #relationship:C# 16-61.For instance, more precise models of renewable energy resources at increasingly lower time and spatial scales are needed to increase the reliability of protection and control systems. #relationship:0# 16-62.Similarly, the behaviors of power systems will be increasingly dependent on external factors, such as the reliability of the smart grid communication network. #relationship:A# 16-63.Thus, power simulators should integrate tools to model each component of a smart grid, as well as the possible interactions between components. 
16-64.Security mechanisms are an essential part of a smart grid. #relationship:B# 16-65.Although a considerable amount of research has been conducted in this field many open issues still exist because the increased interconnection and integration,  between electric grid, monitoring and communication network, data management systems and applications, also introduce new cyber-vulnerabilities into the smart grid. 
16-66.The most compelling research challenges are the design of suitable mechanisms to protect the confidentiality and integrity of metering data, as well as new mechanisms to control the access to smart-grid components and resources given that physical isolation of the power grid might not be feasible anymore.